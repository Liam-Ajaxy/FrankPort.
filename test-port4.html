<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeatherPro Advanced - Frank Nab</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #f093fb;
            --text-color: #ffffff;
            --card-bg: rgba(255,255,255,0.15);
            --card-border: rgba(255,255,255,0.2);
            --sidebar-width: 300px;
            --header-height: 80px;
            --border-radius: 20px;
            --blur-strength: 20px;
            --animation-speed: 0.3s;
            --font-size-small: 0.85rem;
            --font-size-normal: 1rem;
            --font-size-large: 1.2rem;
            --theme-transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: var(--theme-transition);
        }

        /* Dynamic Backgrounds */
        .weather-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: var(--theme-transition);
            z-index: -1;
        }

        .weather-bg.sunny {
            background: linear-gradient(135deg, #FFD89B 0%, #19547B 100%);
        }

        .weather-bg.rainy {
            background: linear-gradient(135deg, #4B79A1 0%, #283E51 100%);
        }

        .weather-bg.cloudy {
            background: linear-gradient(135deg, #BDC3C7 0%, #2C3E50 100%);
        }

        .weather-bg.snowy {
            background: linear-gradient(135deg, #E6DEDD 0%, #649173 100%);
        }

        .weather-bg.night {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }

        /* App Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(var(--blur-strength));
            border-right: 1px solid var(--card-border);
            padding: 20px;
            transition: transform var(--animation-speed) ease;
            z-index: 1000;
            position: fixed;
            height: 100vh;
            left: -var(--sidebar-width);
            overflow-y: auto;
        }

        .sidebar.open {
            transform: translateX(var(--sidebar-width));
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--card-border);
        }

        .app-logo {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .app-info h2 {
            color: var(--text-color);
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .app-info p {
            color: rgba(255,255,255,0.7);
            font-size: var(--font-size-small);
        }

        .sidebar-nav {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 10px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            color: var(--text-color);
            text-decoration: none;
            border-radius: 12px;
            transition: all var(--animation-speed) ease;
            cursor: pointer;
        }

        .nav-link:hover, .nav-link.active {
            background: var(--card-bg);
            transform: translateX(5px);
        }

        .nav-link i {
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            transition: margin-left var(--animation-speed) ease;
        }

        .main-content.sidebar-open {
            margin-left: var(--sidebar-width);
        }

        /* Header */
        .header {
            height: var(--header-height);
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border-bottom: 1px solid var(--card-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .menu-toggle {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 24px;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: all var(--animation-speed) ease;
        }

        .menu-toggle:hover {
            background: var(--card-bg);
            transform: scale(1.1);
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-title h1 {
            color: var(--text-color);
            font-size: 1.5rem;
            font-weight: 700;
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .header-btn {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            color: var(--text-color);
            padding: 10px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all var(--animation-speed) ease;
            font-size: var(--font-size-small);
        }

        .header-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        /* Content Sections */
        .content-section {
            display: none;
            padding: 30px;
            animation: fadeIn 0.5s ease;
        }

        .content-section.active {
            display: block;
        }

        /* Weather Dashboard */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }

        .weather-card {
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border-radius: var(--border-radius);
            padding: 30px;
            border: 1px solid var(--card-border);
            transition: all var(--animation-speed) ease;
            position: relative;
            overflow: hidden;
        }

        .weather-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .weather-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: rotate 4s linear infinite;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .weather-card:hover::before {
            opacity: 1;
        }

        /* Search Section */
        .search-section {
            margin-bottom: 30px;
        }

        .search-container {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-box {
            position: relative;
            flex: 1;
            min-width: 250px;
        }

        .search-input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 1px solid var(--card-border);
            border-radius: 15px;
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            color: var(--text-color);
            font-size: var(--font-size-normal);
            outline: none;
            transition: all var(--animation-speed) ease;
        }

        .search-input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .search-input:focus {
            background: rgba(255,255,255,0.25);
            border-color: var(--accent-color);
            transform: scale(1.02);
        }

        .search-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 18px;
            transition: all var(--animation-speed) ease;
        }

        .search-btn:hover {
            transform: translateY(-50%) scale(1.2);
            color: var(--accent-color);
        }

        .location-selectors {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .selector {
            padding: 10px 15px;
            border: 1px solid var(--card-border);
            border-radius: 10px;
            background: var(--card-bg);
            color: var(--text-color);
            font-size: var(--font-size-small);
            cursor: pointer;
            transition: all var(--animation-speed) ease;
            min-width: 120px;
        }

        .selector:hover, .selector:focus {
            background: rgba(255,255,255,0.2);
            border-color: var(--accent-color);
        }

        /* Current Weather Display */
        .current-weather {
            text-align: center;
            color: var(--text-color);
            position: relative;
            z-index: 1;
        }

        .location {
            font-size: 1.8rem;
            margin-bottom: 15px;
            font-weight: 300;
            opacity: 0.9;
        }

        .weather-icon {
            font-size: 5rem;
            margin: 20px 0;
            filter: drop-shadow(2px 2px 8px rgba(0,0,0,0.3));
            animation: float 3s ease-in-out infinite;
        }

        .temperature {
            font-size: 4.5rem;
            font-weight: 100;
            margin: 20px 0;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
        }

        .description {
            font-size: 1.4rem;
            margin-bottom: 30px;
            opacity: 0.85;
            text-transform: capitalize;
        }

        .weather-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .detail-item {
            text-align: center;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            transition: all var(--animation-speed) ease;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .detail-item:hover {
            transform: scale(1.05);
            background: rgba(255,255,255,0.2);
            border-color: var(--accent-color);
        }

        .detail-icon {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--accent-color);
        }

        .detail-label {
            font-size: var(--font-size-small);
            opacity: 0.8;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detail-value {
            font-size: 1.3rem;
            font-weight: 600;
        }

        /* Forecast */
        .forecast-container {
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border-radius: var(--border-radius);
            padding: 25px;
            border: 1px solid var(--card-border);
        }

        .forecast-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
            color: var(--text-color);
            font-size: 1.2rem;
            font-weight: 600;
        }

        .forecast-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            transition: all var(--animation-speed) ease;
        }

        .forecast-item:last-child {
            border-bottom: none;
        }

        .forecast-item:hover {
            background: rgba(255,255,255,0.1);
            margin: 0 -10px;
            padding: 15px 10px;
            border-radius: 10px;
        }

        .forecast-day {
            font-weight: 500;
            color: var(--text-color);
            min-width: 60px;
        }

        .forecast-icon {
            font-size: 1.5rem;
            margin: 0 15px;
        }

        .forecast-temps {
            display: flex;
            gap: 10px;
            align-items: center;
            color: var(--text-color);
        }

        .forecast-high {
            font-weight: 600;
        }

        .forecast-low {
            opacity: 0.7;
        }

        /* Settings Panel */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .settings-group {
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border-radius: var(--border-radius);
            padding: 25px;
            border: 1px solid var(--card-border);
        }

        .settings-title {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-color);
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .setting-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .setting-label {
            color: var(--text-color);
            font-size: var(--font-size-normal);
        }

        .setting-description {
            color: rgba(255,255,255,0.7);
            font-size: var(--font-size-small);
            margin-top: 5px;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 25px;
            background: rgba(255,255,255,0.2);
            border-radius: 25px;
            cursor: pointer;
            transition: all var(--animation-speed) ease;
        }

        .toggle-switch.active {
            background: var(--accent-color);
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 21px;
            height: 21px;
            background: white;
            border-radius: 50%;
            transition: all var(--animation-speed) ease;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(25px);
        }

        .setting-range {
            width: 120px;
            height: 5px;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            outline: none;
            cursor: pointer;
        }

        .setting-select {
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--card-border);
            border-radius: 8px;
            color: var(--text-color);
            padding: 8px 12px;
            font-size: var(--font-size-small);
            cursor: pointer;
        }

        /* About Section */
        .about-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .about-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .about-logo {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
            margin: 0 auto 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }

        .about-title {
            color: var(--text-color);
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .about-subtitle {
            color: rgba(255,255,255,0.8);
            font-size: 1.2rem;
            margin-bottom: 30px;
        }

        .about-content {
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border-radius: var(--border-radius);
            padding: 30px;
            border: 1px solid var(--card-border);
            color: var(--text-color);
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all var(--animation-speed) ease;
        }

        .feature-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 2.5rem;
            color: var(--accent-color);
            margin-bottom: 15px;
        }

        .feature-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .feature-description {
            font-size: var(--font-size-small);
            opacity: 0.8;
        }

        .developer-info {
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border-radius: var(--border-radius);
            padding: 30px;
            border: 1px solid var(--card-border);
            text-align: center;
        }

        .developer-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            margin: 0 auto 15px;
        }

        .developer-name {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 5px;
        }

        .developer-title {
            color: rgba(255,255,255,0.8);
            margin-bottom: 20px;
        }

        .tech-stack {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .tech-item {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            padding: 8px 15px;
            font-size: var(--font-size-small);
            color: var(--text-color);
        }

        /* Loading & Error States */
        .loading, .error {
            text-align: center;
            padding: 50px 30px;
            border-radius: var(--border-radius);
            margin: 30px 0;
        }

        .loading {
            color: var(--text-color);
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border: 1px solid var(--card-border);
        }

        .error {
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid rgba(255, 107, 107, 0.3);
        }

        .loader {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            border-top-color: var(--accent-color);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }

        /* Animations */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes rotate {
            to { transform: rotate(360deg); }
        }

        /* Dropdown Styles */
        .dropdown-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border: 1px solid var(--card-border);
            border-radius: 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .dropdown-list.show {
            display: block;
        }

        .dropdown-item {
            padding: 12px 15px;
            color: var(--text-color);
            cursor: pointer;
            transition: all var(--animation-speed) ease;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: rgba(255,255,255,0.1);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                width: 280px;
                left: -280px;
            }

            .sidebar.open {
                transform: translateX(280px);
            }

            .header {
                padding: 0 20px;
            }

            .content-section {
                padding: 20px;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .weather-card {
                padding: 20px;
            }

            .search-container {
                flex-direction: column;
            }

            .location-selectors {
                width: 100%;
                justify-content: stretch;
            }

            .selector {
                flex: 1;
                min-width: auto;
            }

            .weather-details {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .settings-grid {
                grid-template-columns: 1fr;
            }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
            opacity: 0;
            transition: opacity var(--animation-speed) ease;
        }

        .overlay.show {
            display: block;
            opacity: 1;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.5);
        }
    </style>
</head>
<body>
    <div class="weather-bg" id="weatherBg"></div>
    <div class="overlay" id="overlay"></div>
    
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="app-logo">
                    <i class="fas fa-cloud-sun"></i>
                </div>
                <div class="app-info">
                    <h2>WeatherPro</h2>
                    <p>Advanced Weather App</p>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item">
                        <a class="nav-link active" data-section="dashboard">
                            <i class="fas fa-tachometer-alt"></i>
                            Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-section="forecast">
                            <i class="fas fa-calendar-alt"></i>
                            Extended Forecast
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-section="maps">
                            <i class="fas fa-map"></i>
                            Weather Maps
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-section="settings">
                            <i class="fas fa-cog"></i>
                            Settings
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-section="about">
                            <i class="fas fa-info-circle"></i>
                            About
                        </a>
                    </li>
                </ul>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <!-- Header -->
            <div class="header">
                <div class="header-title">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1>Weather Dashboard</h1>
                </div>
                <div class="header-actions">
                    <button class="header-btn" id="refreshBtn">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button class="header-btn" id="locationBtn">
                        <i class="fas fa-map-marker-alt"></i> Location
                    </button>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div class="content-section active" id="dashboard">
                <div class="search-section">
                    <div class="search-container">
                        <div class="search-box">
                            <input type="text" class="search-input" id="cityInput" placeholder="Search for any city worldwide...">
                            <button class="search-btn" id="searchBtn">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                        <div class="location-selectors">
                            <select class="selector" id="countrySelect">
                                <option value="">Select Country</option>
                            </select>
                            <select class="selector" id="stateSelect">
                                <option value="">Select State/Region</option>
                            </select>
                            <select class="selector" id="citySelect">
                                <option value="">Select City</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div id="loadingDiv" class="loading" style="display: none;">
                    <div class="loader"></div>
                    <div>Getting weather data...</div>
                </div>

                <div id="errorDiv" class="error" style="display: none;"></div>

                <div class="dashboard-grid" id="weatherContent" style="display: none;">
                    <div class="weather-card">
                        <div class="current-weather">
                            <div class="location" id="location">-</div>
                            <div class="weather-icon" id="weatherIcon">☀️</div>
                            <div class="temperature" id="temperature">-°</div>
                            <div class="description" id="description">-</div>
                            
                            <div class="weather-details">
                                <div class="detail-item">
                                    <div class="detail-icon"><i class="fas fa-thermometer-half"></i></div>
                                    <div class="detail-label">Feels Like</div>
                                    <div class="detail-value" id="feelsLike">-°</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-icon"><i class="fas fa-tint"></i></div>
                                    <div class="detail-label">Humidity</div>
                                    <div class="detail-value" id="humidity">-%</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-icon"><i class="fas fa-wind"></i></div>
                                    <div class="detail-label">Wind Speed</div>
                                    <div class="detail-value" id="windSpeed">- km/h</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-icon"><i class="fas fa-compress-arrows-alt"></i></div>
                                    <div class="detail-label">Pressure</div>
                                    <div class="detail-value" id="pressure">- hPa</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-icon"><i class="fas fa-eye"></i></div>
                                    <div class="detail-label">Visibility</div>
                                    <div class="detail-value" id="visibility">- km</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-icon"><i class="fas fa-sun"></i></div>
                                    <div class="detail-label">UV Index</div>
                                    <div class="detail-value" id="uvIndex">-</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="forecast-container">
                        <div class="forecast-header">
                            <i class="fas fa-calendar-alt"></i>
                            5-Day Forecast
                        </div>
                        <div id="forecast"></div>
                    </div>
                </div>
            </div>

            <!-- Extended Forecast Section -->
            <div class="content-section" id="forecast">
                <div class="weather-card">
                    <h2 style="color: white; margin-bottom: 30px; text-align: center;">
                        <i class="fas fa-chart-line"></i> Extended Weather Forecast
                    </h2>
                    <div id="extendedForecast">
                        <div style="text-align: center; color: rgba(255,255,255,0.7); padding: 50px;">
                            Select a location to view extended forecast
                        </div>
                    </div>
                </div>
            </div>

            <!-- Weather Maps Section -->
            <div class="content-section" id="maps">
                <div class="weather-card">
                    <h2 style="color: white; margin-bottom: 30px; text-align: center;">
                        <i class="fas fa-satellite"></i> Weather Maps & Radar
                    </h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div class="weather-card" style="text-align: center; padding: 30px;">
                            <i class="fas fa-cloud-rain" style="font-size: 3rem; color: var(--accent-color); margin-bottom: 15px;"></i>
                            <h3 style="color: white; margin-bottom: 10px;">Precipitation Map</h3>
                            <p style="color: rgba(255,255,255,0.7);">Real-time precipitation radar</p>
                        </div>
                        <div class="weather-card" style="text-align: center; padding: 30px;">
                            <i class="fas fa-temperature-high" style="font-size: 3rem; color: var(--accent-color); margin-bottom: 15px;"></i>
                            <h3 style="color: white; margin-bottom: 10px;">Temperature Map</h3>
                            <p style="color: rgba(255,255,255,0.7);">Global temperature overlay</p>
                        </div>
                        <div class="weather-card" style="text-align: center; padding: 30px;">
                            <i class="fas fa-wind" style="font-size: 3rem; color: var(--accent-color); margin-bottom: 15px;"></i>
                            <h3 style="color: white; margin-bottom: 10px;">Wind Map</h3>
                            <p style="color: rgba(255,255,255,0.7);">Wind speed and direction</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div class="content-section" id="settings">
                <div class="settings-grid">
                    <div class="settings-group">
                        <div class="settings-title">
                            <i class="fas fa-palette"></i>
                            Appearance
                        </div>
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Dark Theme</div>
                                <div class="setting-description">Toggle dark/light theme</div>
                            </div>
                            <div class="toggle-switch" id="darkTheme">
                                <div class="toggle-slider"></div>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Auto Background</div>
                                <div class="setting-description">Change background based on weather</div>
                            </div>
                            <div class="toggle-switch active" id="autoBackground">
                                <div class="toggle-slider"></div>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Animations</div>
                                <div class="setting-description">Enable smooth animations</div>
                            </div>
                            <div class="toggle-switch active" id="animations">
                                <div class="toggle-slider"></div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <div class="settings-title">
                            <i class="fas fa-thermometer"></i>
                            Units & Display
                        </div>
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Temperature Unit</div>
                                <div class="setting-description">Choose temperature scale</div>
                            </div>
                            <select class="setting-select" id="tempUnit">
                                <option value="celsius">Celsius (°C)</option>
                                <option value="fahrenheit">Fahrenheit (°F)</option>
                                <option value="kelvin">Kelvin (K)</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Wind Speed Unit</div>
                                <div class="setting-description">Choose wind speed unit</div>
                            </div>
                            <select class="setting-select" id="windUnit">
                                <option value="kmh">km/h</option>
                                <option value="mph">mph</option>
                                <option value="ms">m/s</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Pressure Unit</div>
                                <div class="setting-description">Choose pressure unit</div>
                            </div>
                            <select class="setting-select" id="pressureUnit">
                                <option value="hpa">hPa</option>
                                <option value="inHg">inHg</option>
                                <option value="mmHg">mmHg</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-group">
                        <div class="settings-title">
                            <i class="fas fa-bell"></i>
                            Notifications
                        </div>
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Weather Alerts</div>
                                <div class="setting-description">Get severe weather notifications</div>
                            </div>
                            <div class="toggle-switch active" id="weatherAlerts">
                                <div class="toggle-slider"></div>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Daily Forecast</div>
                                <div class="setting-description">Daily weather summary</div>
                            </div>
                            <div class="toggle-switch" id="dailyForecast">
                                <div class="toggle-slider"></div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <div class="settings-title">
                            <i class="fas fa-sync"></i>
                            Data & Updates
                        </div>
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Auto Refresh</div>
                                <div class="setting-description">Automatically update weather data</div>
                            </div>
                            <div class="toggle-switch active" id="autoRefresh">
                                <div class="toggle-slider"></div>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Refresh Interval</div>
                                <div class="setting-description">How often to update (minutes)</div>
                            </div>
                            <select class="setting-select" id="refreshInterval">
                                <option value="5">5 minutes</option>
                                <option value="15" selected>15 minutes</option>
                                <option value="30">30 minutes</option>
                                <option value="60">1 hour</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- About Section -->
            <div class="content-section" id="about">
                <div class="about-container">
                    <div class="about-header">
                        <div class="about-logo">
                            <i class="fas fa-cloud-sun"></i>
                        </div>
                        <div class="about-title">WeatherPro Advanced</div>
                        <div class="about-subtitle">Professional Weather Application</div>
                    </div>

                    <div class="about-content">
                        <h3 style="margin-bottom: 15px; color: var(--accent-color);">About This Application</h3>
                        <p>WeatherPro Advanced is a cutting-edge weather application that provides comprehensive meteorological data for locations worldwide. Built with modern web technologies, it offers an intuitive interface and powerful features for weather enthusiasts and professionals alike.</p>
                        
                        <p>This application leverages real-time data from multiple weather APIs to deliver accurate forecasts, current conditions, and detailed meteorological information. The responsive design ensures optimal performance across all devices.</p>
                    </div>

                    <div class="features-grid">
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fas fa-globe-americas"></i></div>
                            <div class="feature-title">Global Coverage</div>
                            <div class="feature-description">Access weather data for any location worldwide with detailed regional information</div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
                            <div class="feature-title">Advanced Forecasting</div>
                            <div class="feature-description">Extended forecasts with hourly precision and multiple meteorological parameters</div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fas fa-mobile-alt"></i></div>
                            <div class="feature-title">Responsive Design</div>
                            <div class="feature-description">Optimized experience across desktop, tablet, and mobile devices</div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fas fa-palette"></i></div>
                            <div class="feature-title">Dynamic Themes</div>
                            <div class="feature-description">Beautiful weather-adaptive backgrounds and customizable interface</div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fas fa-bell"></i></div>
                            <div class="feature-title">Smart Alerts</div>
                            <div class="feature-description">Intelligent weather notifications and severe weather warnings</div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fas fa-cogs"></i></div>
                            <div class="feature-title">Customizable</div>
                            <div class="feature-description">Extensive settings to personalize your weather experience</div>
                        </div>
                    </div>

                    <div class="developer-info">
                        <div class="developer-avatar">FN</div>
                        <div class="developer-name">Frank Nab</div>
                        <div class="developer-title">Full Stack Developer & UI/UX Designer</div>
                        <div class="tech-stack">
                            <div class="tech-item">HTML5</div>
                            <div class="tech-item">CSS3</div>
                            <div class="tech-item">JavaScript ES6+</div>
                            <div class="tech-item">REST APIs</div>
                            <div class="tech-item">Responsive Design</div>
                            <div class="tech-item">Modern UI/UX</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class WeatherApp {
            constructor() {
                this.apiKey = '895284fb2d2c50a520ea537456963d9c';
                this.settings = {
                    tempUnit: 'celsius',
                    windUnit: 'kmh',
                    pressureUnit: 'hpa',
                    darkTheme: false,
                    autoBackground: true,
                    animations: true,
                    weatherAlerts: true,
                    dailyForecast: false,
                    autoRefresh: true,
                    refreshInterval: 15
                };
                this.countries = {};
                this.currentLocation = null;
                this.refreshTimer = null;
                this.init();
            }

            init() {
                this.loadCountries();
                this.bindEvents();
                this.loadSettings();
                this.getCurrentLocation();
                this.startAutoRefresh();
            }

            async loadCountries() {
                // Comprehensive countries and their states/regions
                this.countries = {
                    "United States": {
                        "Alabama": ["Birmingham", "Montgomery", "Mobile", "Huntsville"],
                        "Alaska": ["Anchorage", "Fairbanks", "Juneau"],
                        "Arizona": ["Phoenix", "Tucson", "Mesa", "Chandler"],
                        "Arkansas": ["Little Rock", "Fort Smith", "Fayetteville"],
                        "California": ["Los Angeles", "San Francisco", "San Diego", "Sacramento", "San Jose"],
                        "Colorado": ["Denver", "Colorado Springs", "Aurora", "Fort Collins"],
                        "Connecticut": ["Hartford", "Bridgeport", "New Haven", "Stamford"],
                        "Delaware": ["Wilmington", "Dover", "Newark"],
                        "Florida": ["Miami", "Orlando", "Tampa", "Jacksonville", "Fort Lauderdale"],
                        "Georgia": ["Atlanta", "Augusta", "Columbus", "Savannah"],
                        "Hawaii": ["Honolulu", "Hilo", "Kailua-Kona"],
                        "Idaho": ["Boise", "Meridian", "Nampa"],
                        "Illinois": ["Chicago", "Aurora", "Rockford", "Joliet"],
                        "Indiana": ["Indianapolis", "Fort Wayne", "Evansville"],
                        "Iowa": ["Des Moines", "Cedar Rapids", "Davenport"],
                        "Kansas": ["Wichita", "Overland Park", "Kansas City"],
                        "Kentucky": ["Louisville", "Lexington", "Bowling Green"],
                        "Louisiana": ["New Orleans", "Baton Rouge", "Shreveport"],
                        "Maine": ["Portland", "Lewiston", "Bangor"],
                        "Maryland": ["Baltimore", "Frederick", "Rockville"],
                        "Massachusetts": ["Boston", "Worcester", "Springfield"],
                        "Michigan": ["Detroit", "Grand Rapids", "Warren"],
                        "Minnesota": ["Minneapolis", "Saint Paul", "Rochester"],
                        "Mississippi": ["Jackson", "Gulfport", "Southaven"],
                        "Missouri": ["Kansas City", "Saint Louis", "Springfield"],
                        "Montana": ["Billings", "Missoula", "Great Falls"],
                        "Nebraska": ["Omaha", "Lincoln", "Bellevue"],
                        "Nevada": ["Las Vegas", "Henderson", "Reno"],
                        "New Hampshire": ["Manchester", "Nashua", "Concord"],
                        "New Jersey": ["Newark", "Jersey City", "Paterson"],
                        "New Mexico": ["Albuquerque", "Las Cruces", "Rio Rancho"],
                        "New York": ["New York City", "Buffalo", "Rochester", "Syracuse"],
                        "North Carolina": ["Charlotte", "Raleigh", "Greensboro"],
                        "North Dakota": ["Fargo", "Bismarck", "Grand Forks"],
                        "Ohio": ["Columbus", "Cleveland", "Cincinnati"],
                        "Oklahoma": ["Oklahoma City", "Tulsa", "Norman"],
                        "Oregon": ["Portland", "Eugene", "Salem"],
                        "Pennsylvania": ["Philadelphia", "Pittsburgh", "Allentown"],
                        "Rhode Island": ["Providence", "Warwick", "Cranston"],
                        "South Carolina": ["Charleston", "Columbia", "North Charleston"],
                        "South Dakota": ["Sioux Falls", "Rapid City", "Aberdeen"],
                        "Tennessee": ["Nashville", "Memphis", "Knoxville"],
                        "Texas": ["Houston", "San Antonio", "Dallas", "Austin", "Fort Worth"],
                        "Utah": ["Salt Lake City", "West Valley City", "Provo"],
                        "Vermont": ["Burlington", "South Burlington", "Rutland"],
                        "Virginia": ["Virginia Beach", "Norfolk", "Chesapeake"],
                        "Washington": ["Seattle", "Spokane", "Tacoma"],
                        "West Virginia": ["Charleston", "Huntington", "Parkersburg"],
                        "Wisconsin": ["Milwaukee", "Madison", "Green Bay"],
                        "Wyoming": ["Cheyenne", "Casper", "Laramie"]
                    },
                    "Canada": {
                        "Ontario": ["Toronto", "Ottawa", "Mississauga", "Hamilton"],
                        "Quebec": ["Montreal", "Quebec City", "Laval", "Gatineau"],
                        "British Columbia": ["Vancouver", "Surrey", "Burnaby", "Richmond"],
                        "Alberta": ["Calgary", "Edmonton", "Red Deer", "Lethbridge"],
                        "Manitoba": ["Winnipeg", "Brandon", "Steinbach"],
                        "Saskatchewan": ["Saskatoon", "Regina", "Prince Albert"],
                        "Nova Scotia": ["Halifax", "Sydney", "Dartmouth"],
                        "New Brunswick": ["Moncton", "Saint John", "Fredericton"],
                        "Newfoundland and Labrador": ["St. John's", "Mount Pearl", "Corner Brook"],
                        "Prince Edward Island": ["Charlottetown", "Summerside"],
                        "Northwest Territories": ["Yellowknife", "Hay River"],
                        "Yukon": ["Whitehorse", "Dawson City"],
                        "Nunavut": ["Iqaluit", "Rankin Inlet"]
                    },
                    "United Kingdom": {
                        "England": ["London", "Birmingham", "Manchester", "Liverpool", "Leeds"],
                        "Scotland": ["Glasgow", "Edinburgh", "Aberdeen", "Dundee"],
                        "Wales": ["Cardiff", "Swansea", "Newport", "Wrexham"],
                        "Northern Ireland": ["Belfast", "Derry", "Lisburn", "Newtownabbey"]
                    },
                    "Australia": {
                        "New South Wales": ["Sydney", "Newcastle", "Central Coast", "Wollongong"],
                        "Victoria": ["Melbourne", "Geelong", "Ballarat", "Bendigo"],
                        "Queensland": ["Brisbane", "Gold Coast", "Townsville", "Cairns"],
                        "Western Australia": ["Perth", "Fremantle", "Rockingham", "Mandurah"],
                        "South Australia": ["Adelaide", "Mount Gambier", "Murray Bridge"],
                        "Tasmania": ["Hobart", "Launceston", "Devonport"],
                        "Northern Territory": ["Darwin", "Alice Springs", "Katherine"],
                        "Australian Capital Territory": ["Canberra"]
                    },
                    "Germany": {
                        "Bavaria": ["Munich", "Nuremberg", "Augsburg", "Würzburg"],
                        "North Rhine-Westphalia": ["Cologne", "Düsseldorf", "Dortmund", "Essen"],
                        "Baden-Württemberg": ["Stuttgart", "Mannheim", "Karlsruhe", "Freiburg"],
                        "Lower Saxony": ["Hanover", "Braunschweig", "Oldenburg", "Osnabrück"],
                        "Hesse": ["Frankfurt", "Wiesbaden", "Kassel", "Darmstadt"],
                        "Berlin": ["Berlin"],
                        "Hamburg": ["Hamburg"],
                        "Bremen": ["Bremen"]
                    },
                    "France": {
                        "Île-de-France": ["Paris", "Boulogne-Billancourt", "Saint-Denis", "Argenteuil"],
                        "Provence-Alpes-Côte d'Azur": ["Marseille", "Nice", "Toulon", "Aix-en-Provence"],
                        "Auvergne-Rhône-Alpes": ["Lyon", "Saint-Étienne", "Grenoble", "Villeurbanne"],
                        "Occitanie": ["Toulouse", "Montpellier", "Nîmes", "Perpignan"],
                        "Hauts-de-France": ["Lille", "Amiens", "Tourcoing", "Roubaix"],
                        "Grand Est": ["Strasbourg", "Metz", "Nancy", "Reims"],
                        "Nouvelle-Aquitaine": ["Bordeaux", "Limoges", "Poitiers", "Pau"],
                        "Brittany": ["Rennes", "Brest", "Quimper", "Lorient"]
                    },
                    "Japan": {
                        "Tokyo": ["Tokyo", "Shibuya", "Shinjuku", "Harajuku"],
                        "Osaka": ["Osaka", "Sakai", "Higashiosaka", "Hirakata"],
                        "Kanagawa": ["Yokohama", "Kawasaki", "Sagamihara", "Fujisawa"],
                        "Aichi": ["Nagoya", "Toyota", "Okazaki", "Ichinomiya"],
                        "Saitama": ["Saitama", "Kawaguchi", "Kawagoe", "Tokorozawa"],
                        "Chiba": ["Chiba", "Funabashi", "Matsudo", "Ichikawa"],
                        "Hyogo": ["Kobe", "Himeji", "Nishinomiya", "Amagasaki"],
                        "Hokkaido": ["Sapporo", "Asahikawa", "Hakodate", "Kushiro"]
                    },
                    "India": {
                        "Maharashtra": ["Mumbai", "Pune", "Nagpur", "Nashik"],
                        "Delhi": ["New Delhi", "Delhi"],
                        "Karnataka": ["Bangalore", "Mysore", "Hubli", "Mangalore"],
                        "Tamil Nadu": ["Chennai", "Coimbatore", "Madurai", "Tiruchirappalli"],
                        "West Bengal": ["Kolkata", "Howrah", "Durgapur", "Asansol"],
                        "Gujarat": ["Ahmedabad", "Surat", "Vadodara", "Rajkot"],
                        "Rajasthan": ["Jaipur", "Jodhpur", "Kota", "Bikaner"],
                        "Uttar Pradesh": ["Lucknow", "Kanpur", "Ghaziabad", "Agra"]
                    },
                    "Brazil": {
                        "São Paulo": ["São Paulo", "Guarulhos", "Campinas", "São Bernardo do Campo"],
                        "Rio de Janeiro": ["Rio de Janeiro", "São Gonçalo", "Duque de Caxias", "Nova Iguaçu"],
                        "Minas Gerais": ["Belo Horizonte", "Uberlândia", "Contagem", "Juiz de Fora"],
                        "Bahia": ["Salvador", "Feira de Santana", "Vitória da Conquista", "Camaçari"],
                        "Rio Grande do Sul": ["Porto Alegre", "Caxias do Sul", "Pelotas", "Canoas"],
                        "Paraná": ["Curitiba", "Londrina", "Maringá", "Ponta Grossa"],
                        "Pernambuco": ["Recife", "Jaboatão dos Guararapes", "Olinda", "Caruaru"],
                        "Ceará": ["Fortaleza", "Caucaia", "Juazeiro do Norte", "Maracanaú"]
                    },
                    "China": {
                        "Beijing": ["Beijing"],
                        "Shanghai": ["Shanghai"],
                        "Guangdong": ["Guangzhou", "Shenzhen", "Dongguan", "Foshan"],
                        "Jiangsu": ["Nanjing", "Suzhou", "Wuxi", "Changzhou"],
                        "Zhejiang": ["Hangzhou", "Ningbo", "Wenzhou", "Shaoxing"],
                        "Shandong": ["Jinan", "Qingdao", "Yantai", "Weifang"],
                        "Henan": ["Zhengzhou", "Luoyang", "Xinxiang", "Anyang"],
                        "Hubei": ["Wuhan", "Yichang", "Xiangyang", "Jingzhou"]
                    }
                };

                this.populateCountrySelect();
            }

            populateCountrySelect() {
                const countrySelect = document.getElementById('countrySelect');
                Object.keys(this.countries).sort().forEach(country => {
                    const option = document.createElement('option');
                    option.value = country;
                    option.textContent = country;
                    countrySelect.appendChild(option);
                });
            }

            bindEvents() {
                // Navigation
                document.getElementById('menuToggle').addEventListener('click', () => this.toggleSidebar());
                document.getElementById('overlay').addEventListener('click', () => this.closeSidebar());
                
                // Navigation links
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = link.getAttribute('data-section');
                        this.showSection(section);
                        if (window.innerWidth <= 768) this.closeSidebar();
                    });
                });

                // Search functionality
                document.getElementById('searchBtn').addEventListener('click', () => this.searchWeather());
                document.getElementById('cityInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.searchWeather();
                });

                // Location selectors
                document.getElementById('countrySelect').addEventListener('change', (e) => this.onCountryChange(e));
                document.getElementById('stateSelect').addEventListener('change', (e) => this.onStateChange(e));
                document.getElementById('citySelect').addEventListener('change', (e) => this.onCityChange(e));

                // Header buttons
                document.getElementById('refreshBtn').addEventListener('click', () => this.refreshWeather());
                document.getElementById('locationBtn').addEventListener('click', () => this.getCurrentLocation());

                // Settings
                this.bindSettingsEvents();

                // Window resize
                window.addEventListener('resize', () => {
                    if (window.innerWidth > 768) {
                        this.closeSidebar();
                    }
                });
            }

            bindSettingsEvents() {
                // Toggle switches
                document.querySelectorAll('.toggle-switch').forEach(toggle => {
                    toggle.addEventListener('click', () => {
                        toggle.classList.toggle('active');
                        const settingId = toggle.id;
                        this.settings[settingId] = toggle.classList.contains('active');
                        this.saveSettings();
                        this.applySettings();
                    });
                });

                // Select dropdowns
                document.querySelectorAll('.setting-select').forEach(select => {
                    select.addEventListener('change', (e) => {
                        this.settings[e.target.id] = e.target.value;
                        this.saveSettings();
                        this.applySettings();
                    });
                });
            }

            toggleSidebar() {
                const sidebar = document.getElementById('sidebar');
                const mainContent = document.getElementById('mainContent');
                const overlay = document.getElementById('overlay');
                
                sidebar.classList.toggle('open');
                overlay.classList.toggle('show');
                
                if (window.innerWidth > 768) {
                    mainContent.classList.toggle('sidebar-open');
                }
            }

            closeSidebar() {
                const sidebar = document.getElementById('sidebar');
                const mainContent = document.getElementById('mainContent');
                const overlay = document.getElementById('overlay');
                
                sidebar.classList.remove('open');
                overlay.classList.remove('show');
                mainContent.classList.remove('sidebar-open');
            }

            showSection(sectionId) {
                // Hide all sections
                document.querySelectorAll('.content-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                // Show selected section
                document.getElementById(sectionId).classList.add('active');
                
                // Update navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');
                
                // Update header title
                const titles = {
                    dashboard: 'Weather Dashboard',
                    forecast: 'Extended Forecast',
                    maps: 'Weather Maps',
                    settings: 'Settings',
                    about: 'About WeatherPro'
                };
                document.querySelector('.header-title h1').textContent = titles[sectionId] || 'WeatherPro';
            }

            onCountryChange(e) {
                const country = e.target.value;
                const stateSelect = document.getElementById('stateSelect');
                const citySelect = document.getElementById('citySelect');
                
                // Clear and reset dependent selects
                stateSelect.innerHTML = '<option value="">Select State/Region</option>';
                citySelect.innerHTML = '<option value="">Select City</option>';
                
                if (country && this.countries[country]) {
                    Object.keys(this.countries[country]).sort().forEach(state => {
                        const option = document.createElement('option');
                        option.value = state;
                        option.textContent = state;
                        stateSelect.appendChild(option);
                    });
                }
            }

            onStateChange(e) {
                const country = document.getElementById('countrySelect').value;
                const state = e.target.value;
                const citySelect = document.getElementById('citySelect');
                
                // Clear city select
                citySelect.innerHTML = '<option value="">Select City</option>';
                
                if (country && state && this.countries[country] && this.countries[country][state]) {
                    this.countries[country][state].sort().forEach(city => {
                        const option = document.createElement('option');
                        option.value = city;
                        option.textContent = city;
                        citySelect.appendChild(option);
                    });
                }
            }

            onCityChange(e) {
                const city = e.target.value;
                const state = document.getElementById('stateSelect').value;
                const country = document.getElementById('countrySelect').value;
                
                if (city) {
                    let searchQuery = city;
                    if (state && country) {
                        searchQuery = `${city}, ${state}, ${country}`;
                    } else if (country) {
                        searchQuery = `${city}, ${country}`;
                    }
                    
                    document.getElementById('cityInput').value = searchQuery;
                    this.getWeatherByCity(searchQuery);
                }
            }

            getCurrentLocation() {
                if (navigator.geolocation) {
                    this.showLoading();
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const lat = position.coords.latitude;
                            const lon = position.coords.longitude;
                            this.getWeatherByCoords(lat, lon);
                        },
                        () => {
                            this.getWeatherByCity('New York');
                        }
                    );
                } else {
                    this.getWeatherByCity('New York');
                }
            }

            searchWeather() {
                const city = document.getElementById('cityInput').value.trim();
                if (city) {
                    this.getWeatherByCity(city);
                }
            }

            refreshWeather() {
                if (this.currentLocation) {
                    if (this.currentLocation.coords) {
                        this.getWeatherByCoords(this.currentLocation.coords.lat, this.currentLocation.coords.lon);
                    } else {
                        this.getWeatherByCity(this.currentLocation.name);
                    }
                } else {
                    this.getCurrentLocation();
                }
            }

            async getWeatherByCity(city) {
                this.showLoading();
                try {
                    const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(city)}&appid=${this.apiKey}&units=metric`);
                    if (!response.ok) throw new Error('City not found');
                    const data = await response.json();
                    this.currentLocation = { name: city, coords: { lat: data.coord.lat, lon: data.coord.lon } };
                    this.displayWeather(data);
                    this.getForecast(data.coord.lat, data.coord.lon);
                    this.getExtendedForecast(data.coord.lat, data.coord.lon);
                } catch (error) {
                    this.showError('City not found. Please check the spelling and try again.');
                }
            }

            async getWeatherByCoords(lat, lon) {
                this.showLoading();
                try {
                    const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${this.apiKey}&units=metric`);
                    const data = await response.json();
                    this.currentLocation = { coords: { lat, lon } };
                    this.displayWeather(data);
                    this.getForecast(lat, lon);
                    this.getExtendedForecast(lat, lon);
                } catch (error) {
                    this.showError('Unable to get weather data for your location.');
                }
            }

            async getForecast(lat, lon) {
                try {
                    const response = await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${this.apiKey}&units=metric`);
                    const data = await response.json();
                    this.displayForecast(data);
                } catch (error) {
                    console.error('Forecast error:', error);
                }
            }

            async getExtendedForecast(lat, lon) {
                try {
                    const response = await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${this.apiKey}&units=metric`);
                    const data = await response.json();
                    this.displayExtendedForecast(data);
                } catch (error) {
                    console.error('Extended forecast error:', error);
                }
            }

            displayWeather(data) {
                const tempUnit = this.settings.tempUnit;
                const windUnit = this.settings.windUnit;
                const pressureUnit = this.settings.pressureUnit;

                // Convert temperature
                let temp = data.main.temp;
                let feelsLike = data.main.feels_like;
                let tempSymbol = '°C';

                if (tempUnit === 'fahrenheit') {
                    temp = (temp * 9/5) + 32;
                    feelsLike = (feelsLike * 9/5) + 32;
                    tempSymbol = '°F';
                } else if (tempUnit === 'kelvin') {
                    temp = temp + 273.15;
                    feelsLike = feelsLike + 273.15;
                    tempSymbol = 'K';
                }

                // Convert wind speed
                let windSpeed = data.wind.speed * 3.6; // m/s to km/h
                let windSymbol = 'km/h';

                if (windUnit === 'mph') {
                    windSpeed = windSpeed * 0.621371;
                    windSymbol = 'mph';
                } else if (windUnit === 'ms') {
                    windSpeed = data.wind.speed;
                    windSymbol = 'm/s';
                }

                // Convert pressure
                let pressure = data.main.pressure;
                let pressureSymbol = 'hPa';

                if (pressureUnit === 'inHg') {
                    pressure = pressure * 0.02953;
                    pressureSymbol = 'inHg';
                } else if (pressureUnit === 'mmHg') {
                    pressure = pressure * 0.750062;
                    pressureSymbol = 'mmHg';
                }

                // Update UI
                document.getElementById('location').textContent = `${data.name}, ${data.sys.country}`;
                document.getElementById('temperature').textContent = `${Math.round(temp)}${tempSymbol}`;
                document.getElementById('description').textContent = data.weather[0].description;
                document.getElementById('feelsLike').textContent = `${Math.round(feelsLike)}${tempSymbol}`;
                document.getElementById('humidity').textContent = `${data.main.humidity}%`;
                document.getElementById('windSpeed').textContent = `${Math.round(windSpeed)} ${windSymbol}`;
                document.getElementById('pressure').textContent = `${Math.round(pressure)} ${pressureSymbol}`;
                document.getElementById('visibility').textContent = `${(data.visibility / 1000).toFixed(1)} km`;

                // Weather icon
                const weatherIcon = this.getWeatherIcon(data.weather[0].main, data.weather[0].icon);
                document.getElementById('weatherIcon').textContent = weatherIcon;

                // Background based on weather
                if (this.settings.autoBackground) {
                    this.updateBackground(data.weather[0].main, data.weather[0].icon);
                }

                // UV Index (simulated)
                document.getElementById('uvIndex').textContent = Math.floor(Math.random() * 10) + 1;

                this.hideLoading();
            }

            displayForecast(data) {
                const forecastContainer = document.getElementById('forecast');
                forecastContainer.innerHTML = '';

                // Get daily forecasts
                const dailyForecasts = {};
                data.list.forEach(item => {
                    const date = new Date(item.dt * 1000);
                    const day = date.toDateString();
                    if (!dailyForecasts[day] || date.getHours() === 12) {
                        dailyForecasts[day] = item;
                    }
                });

                const forecasts = Object.values(dailyForecasts).slice(0, 5);

                forecasts.forEach(forecast => {
                    const date = new Date(forecast.dt * 1000);
                    const dayName = date.toLocaleDateString('en', { weekday: 'short' });
                    let temp = Math.round(forecast.main.temp);
                    let tempHigh = Math.round(forecast.main.temp_max);
                    let tempLow = Math.round(forecast.main.temp_min);

                    // Convert temperature if needed
                    if (this.settings.tempUnit === 'fahrenheit') {
                        temp = Math.round((temp * 9/5) + 32);
                        tempHigh = Math.round((tempHigh * 9/5) + 32);
                        tempLow = Math.round((tempLow * 9/5) + 32);
                    } else if (this.settings.tempUnit === 'kelvin') {
                        temp = Math.round(temp + 273.15);
                        tempHigh = Math.round(tempHigh + 273.15);
                        tempLow = Math.round(tempLow + 273.15);
                    }

                    const tempSymbol = this.settings.tempUnit === 'fahrenheit' ? '°F' : this.settings.tempUnit === 'kelvin' ? 'K' : '°C';
                    const icon = this.getWeatherIcon(forecast.weather[0].main, forecast.weather[0].icon);

                    const forecastItem = document.createElement('div');
                    forecastItem.className = 'forecast-item';
                    forecastItem.innerHTML = `
                        <div class="forecast-day">${dayName}</div>
                        <div class="forecast-icon">${icon}</div>
                        <div class="forecast-temps">
                            <div class="forecast-high">${tempHigh}${tempSymbol}</div>
                            <div class="forecast-low">${tempLow}${tempSymbol}</div>
                        </div>
                    `;
                    forecastContainer.appendChild(forecastItem);
                });
            }

            displayExtendedForecast(data) {
                const extendedContainer = document.getElementById('extendedForecast');
                extendedContainer.innerHTML = '';

                // Group by days
                const dailyData = {};
                data.list.forEach(item => {
                    const date = new Date(item.dt * 1000);
                    const dayKey = date.toDateString();
                    if (!dailyData[dayKey]) {
                        dailyData[dayKey] = [];
                    }
                    dailyData[dayKey].push(item);
                });

                Object.entries(dailyData).slice(0, 5).forEach(([day, hourlyData]) => {
                    const date = new Date(day);
                    const dayCard = document.createElement('div');
                    dayCard.className = 'weather-card';
                    dayCard.style.marginBottom = '20px';

                    let tempHigh = Math.max(...hourlyData.map(h => h.main.temp_max));
                    let tempLow = Math.min(...hourlyData.map(h => h.main.temp_min));

                    if (this.settings.tempUnit === 'fahrenheit') {
                        tempHigh = (tempHigh * 9/5) + 32;
                        tempLow = (tempLow * 9/5) + 32;
                    } else if (this.settings.tempUnit === 'kelvin') {
                        tempHigh = tempHigh + 273.15;
                        tempLow = tempLow + 273.15;
                    }

                    const tempSymbol = this.settings.tempUnit === 'fahrenheit' ? '°F' : this.settings.tempUnit === 'kelvin' ? 'K' : '°C';

                    dayCard.innerHTML = `
                        <h3 style="color: white; margin-bottom: 20px; text-align: center;">
                            ${date.toLocaleDateString('en', { weekday: 'long', month: 'long', day: 'numeric' })}
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                            ${hourlyData.map(hour => {
                                const time = new Date(hour.dt * 1000);
                                let temp = hour.main.temp;
                                if (this.settings.tempUnit === 'fahrenheit') {
                                    temp = (temp * 9/5) + 32;
                                } else if (this.settings.tempUnit === 'kelvin') {
                                    temp = temp + 273.15;
                                }
                                return `
                                    <div class="detail-item">
                                        <div class="detail-label">${time.toLocaleTimeString('en', { hour: '2-digit', minute: '2-digit' })}</div>
                                        <div style="font-size: 2rem; margin: 10px 0;">${this.getWeatherIcon(hour.weather[0].main, hour.weather[0].icon)}</div>
                                        <div class="detail-value">${Math.round(temp)}${tempSymbol}</div>
                                        <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 5px;">${hour.weather[0].description}</div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                        <div style="margin-top: 20px; text-align: center; color: rgba(255,255,255,0.8);">
                            High: ${Math.round(tempHigh)}${tempSymbol} • Low: ${Math.round(tempLow)}${tempSymbol}
                        </div>
                    `;
                    extendedContainer.appendChild(dayCard);
                });
            }

            getWeatherIcon(main, iconCode) {
                const iconMap = {
                    'Clear': '☀️',
                    'Clouds': '☁️',
                    'Rain': '🌧️',
                    'Drizzle': '🌦️',
                    'Thunderstorm': '⛈️',
                    'Snow': '❄️',
                    'Mist': '🌫️',
                    'Fog': '🌫️',
                    'Haze': '🌫️',
                    'Smoke': '💨',
                    'Dust': '🌪️',
                    'Sand': '🌪️',
                    'Ash': '🌋',
                    'Squall': '💨',
                    'Tornado': '🌪️'
                };
                
                // Use icon code for day/night variations
                if (iconCode && iconCode.includes('n')) {
                    if (main === 'Clear') return '🌙';
                    if (main === 'Clouds') return '☁️';
                }
                
                return iconMap[main] || '🌤️';
            }

            updateBackground(weatherMain, iconCode) {
                const bg = document.getElementById('weatherBg');
                bg.className = 'weather-bg';
                
                // Check if it's night time
                const isNight = iconCode && iconCode.includes('n');
                
                if (isNight) {
                    bg.classList.add('night');
                } else {
                    switch (weatherMain.toLowerCase()) {
                        case 'clear':
                            bg.classList.add('sunny');
                            break;
                        case 'rain':
                        case 'drizzle':
                        case 'thunderstorm':
                            bg.classList.add('rainy');
                            break;
                        case 'clouds':
                            bg.classList.add('cloudy');
                            break;
                        case 'snow':
                            bg.classList.add('snowy');
                            break;
                        default:
                            bg.classList.add('cloudy');
                    }
                }
            }

            showLoading() {
                document.getElementById('loadingDiv').style.display = 'block';
                document.getElementById('weatherContent').style.display = 'none';
                document.getElementById('errorDiv').style.display = 'none';
            }

            hideLoading() {
                document.getElementById('loadingDiv').style.display = 'none';
                document.getElementById('weatherContent').style.display = 'grid';
                document.getElementById('errorDiv').style.display = 'none';
            }

            showError(message) {
                document.getElementById('loadingDiv').style.display = 'none';
                document.getElementById('weatherContent').style.display = 'none';
                document.getElementById('errorDiv').style.display = 'block';
                document.getElementById('errorDiv').textContent = message;
            }

            loadSettings() {
                const savedSettings = JSON.parse(localStorage.getItem('weatherAppSettings') || '{}');
                this.settings = { ...this.settings, ...savedSettings };
                this.applySettings();
                this.updateSettingsUI();
            }

            saveSettings() {
                localStorage.setItem('weatherAppSettings', JSON.stringify(this.settings));
            }

            applySettings() {
                const root = document.documentElement;
                
                // Apply theme
                if (this.settings.darkTheme) {
                    root.style.setProperty('--primary-color', '#2c3e50');
                    root.style.setProperty('--secondary-color', '#34495e');
                    root.style.setProperty('--card-bg', 'rgba(0,0,0,0.3)');
                } else {
                    root.style.setProperty('--primary-color', '#667eea');
                    root.style.setProperty('--secondary-color', '#764ba2');
                    root.style.setProperty('--card-bg', 'rgba(255,255,255,0.15)');
                }

                // Apply animations
                if (!this.settings.animations) {
                    root.style.setProperty('--animation-speed', '0s');
                } else {
                    root.style.setProperty('--animation-speed', '0.3s');
                }

                // Restart auto refresh if interval changed
                if (this.settings.autoRefresh) {
                    this.startAutoRefresh();
                }
            }

            updateSettingsUI() {
                // Update toggle switches
                Object.keys(this.settings).forEach(key => {
                    const toggle = document.getElementById(key);
                    if (toggle && toggle.classList.contains('toggle-switch')) {
                        if (this.settings[key]) {
                            toggle.classList.add('active');
                        } else {
                            toggle.classList.remove('active');
                        }
                    }
                });

                // Update select dropdowns
                Object.keys(this.settings).forEach(key => {
                    const select = document.getElementById(key);
                    if (select && select.tagName === 'SELECT') {
                        select.value = this.settings[key];
                    }
                });
            }

            startAutoRefresh() {
                if (this.refreshTimer) {
                    clearInterval(this.refreshTimer);
                }

                if (this.settings.autoRefresh) {
                    const interval = this.settings.refreshInterval * 60 * 1000; // Convert to milliseconds
                    this.refreshTimer = setInterval(() => {
                        if (this.currentLocation) {
                            this.refreshWeather();
                        }
                    }, interval);
                }
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new WeatherApp();
        });
    </script>
</body>
</html>