<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FrankPort Admin Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: #e8e9ed;
            font-size: 16px;
            line-height: 1.6;
            min-height: 100vh;
        }

        #app {
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background: rgba(26, 30, 46, 0.95);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(104, 120, 147, 0.2);
            padding: 2rem 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .sidebar.open {
            transform: translateX(0);
        }

        .sidebar-header {
            padding: 0 2rem 2rem 2rem;
            border-bottom: 1px solid rgba(104, 120, 147, 0.2);
            margin-bottom: 2rem;
        }

        .sidebar-header h1 {
            color: #7dd3fc;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: 0.5rem;
        }

        .sidebar-nav a {
            display: block;
            padding: 1rem 2rem;
            color: #94a3b8;
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            cursor: pointer;
        }

        .sidebar-nav a:hover,
        .sidebar-nav a.active {
            background: rgba(125, 211, 252, 0.1);
            border-left-color: #7dd3fc;
            color: #7dd3fc;
        }

        .main-content {
            flex: 1;
            margin-left: 0;
            transition: margin-left 0.3s ease;
        }

        .main-content.sidebar-open {
            margin-left: 280px;
        }

        .topbar {
            background: rgba(26, 30, 46, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            border-bottom: 1px solid rgba(104, 120, 147, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .menu-toggle {
            background: none;
            border: none;
            color: #7dd3fc;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .menu-toggle:hover {
            background: rgba(125, 211, 252, 0.1);
        }

        .logout-btn {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #fca5a5;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.5);
        }

        .content {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 2rem;
        }

        .login-box {
            background: rgba(26, 30, 46, 0.95);
            backdrop-filter: blur(10px);
            padding: 3rem;
            border-radius: 16px;
            border: 1px solid rgba(104, 120, 147, 0.2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 400px;
        }

        .login-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .login-header h1 {
            color: #7dd3fc;
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .login-header p {
            color: #94a3b8;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            color: #cbd5e1;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 1rem;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(104, 120, 147, 0.3);
            border-radius: 8px;
            color: #e2e8f0;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #7dd3fc;
            box-shadow: 0 0 0 3px rgba(125, 211, 252, 0.1);
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #7dd3fc, #3b82f6);
            color: white;
            width: 100%;
            justify-content: center;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 16px rgba(125, 211, 252, 0.3);
        }

        .btn-secondary {
            background: rgba(104, 120, 147, 0.1);
            border: 1px solid rgba(104, 120, 147, 0.3);
            color: #cbd5e1;
        }

        .btn-secondary:hover {
            background: rgba(104, 120, 147, 0.2);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 16px rgba(16, 185, 129, 0.3);
        }

        .btn-danger {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #fca5a5;
        }

        .btn-danger:hover {
            background: rgba(239, 68, 68, 0.2);
        }

        .forgot-password {
            text-align: center;
            margin-top: 1rem;
        }

        .forgot-password a {
            color: #7dd3fc;
            text-decoration: none;
            font-size: 14px;
            cursor: pointer;
        }

        .forgot-password a:hover {
            text-decoration: underline;
        }

        .card {
            background: rgba(26, 30, 46, 0.6);
            border: 1px solid rgba(104, 120, 147, 0.2);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
        }

        .card-header {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(104, 120, 147, 0.2);
        }

        .card-header h2 {
            color: #7dd3fc;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .notification-item {
            background: rgba(30, 41, 59, 0.4);
            border: 1px solid rgba(104, 120, 147, 0.2);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .notification-item:hover {
            border-color: rgba(125, 211, 252, 0.3);
            transform: translateY(-1px);
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .notification-title {
            color: #e2e8f0;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0;
        }

        .notification-date {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .notification-body {
            color: #cbd5e1;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .notification-actions {
            display: flex;
            gap: 0.5rem;
        }

        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .alert-success {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #6ee7b7;
        }

        .alert-error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #fca5a5;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .hidden {
            display: none !important;
        }

        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #94a3b8;
        }

        .empty-state h3 {
            color: #cbd5e1;
            margin-bottom: 0.5rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .stat-card {
            background: rgba(30, 41, 59, 0.4);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            color: #7dd3fc;
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
            }
            
            .main-content.sidebar-open {
                margin-left: 0;
            }
            
            .content {
                padding: 1rem;
            }
            
            .login-box {
                padding: 2rem;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .notification-header {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .notification-actions {
                flex-wrap: wrap;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading animations */
        .fade-in {
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .slide-in {
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- All content will be dynamically generated here -->
    </div>

    <script>
        // App Configuration
        const APP_CONFIG = {
            name: 'FrankPort Admin',
            version: '1.0.0',
            defaultPasswords: {
                main: 'admin123',
                backup: 'backup456'
            }
        };

        // App State Management
        class AppState {
            constructor() {
                this.isAuthenticated = false;
                this.currentUser = null;
                this.currentPage = 'broadcasts';
                this.notifications = [];
                this.passwords = { ...APP_CONFIG.defaultPasswords };
                this.sidebarOpen = false;
            }

            // Authentication methods
            login(token) {
                this.isAuthenticated = true;
                sessionStorage.setItem('frankport_admin_token', token);
                sessionStorage.setItem('last_login', new Date().toISOString());
            }

            logout() {
                this.isAuthenticated = false;
                this.currentUser = null;
                sessionStorage.removeItem('frankport_admin_token');
            }

            checkAuth() {
                const token = sessionStorage.getItem('frankport_admin_token');
                this.isAuthenticated = token === 'authenticated';
                return this.isAuthenticated;
            }

            // Notification methods
            addNotification(notification) {
                const newNotification = {
                    id: Date.now(),
                    ...notification,
                    date: new Date().toISOString(),
                    timestamp: new Date().toLocaleString()
                };
                this.notifications.unshift(newNotification);
                this.saveNotifications();
                return newNotification;
            }

            removeNotification(id) {
                this.notifications = this.notifications.filter(n => n.id !== parseInt(id));
                this.saveNotifications();
            }

            loadNotifications() {
                const saved = localStorage.getItem('frankport_notifications');
                if (saved) {
                    this.notifications = JSON.parse(saved);
                }
            }

            saveNotifications() {
                localStorage.setItem('frankport_notifications', JSON.stringify(this.notifications));
            }

            // Password methods
            updatePasswords(main, backup) {
                if (main) this.passwords.main = main;
                if (backup) this.passwords.backup = backup;
            }

            validatePassword(password, isBackup = false) {
                const targetPassword = isBackup ? this.passwords.backup : this.passwords.main;
                return password === targetPassword;
            }
        }

        // Component System
        class Component {
            constructor(container) {
                this.container = container;
                this.element = null;
            }

            render() {
                throw new Error('render() method must be implemented');
            }

            mount() {
                this.element = this.render();
                this.container.appendChild(this.element);
                this.afterMount();
                return this.element;
            }

            unmount() {
                if (this.element && this.element.parentNode) {
                    this.element.parentNode.removeChild(this.element);
                }
            }

            afterMount() {
                // Override in subclasses for post-mount logic
            }

            createElement(tag, attributes = {}, children = []) {
                const element = document.createElement(tag);
                
                Object.keys(attributes).forEach(key => {
                    if (key === 'className') {
                        element.className = attributes[key];
                    } else if (key === 'onClick') {
                        element.addEventListener('click', attributes[key]);
                    } else if (key === 'onSubmit') {
                        element.addEventListener('submit', attributes[key]);
                    } else if (key === 'onChange') {
                        element.addEventListener('change', attributes[key]);
                    } else if (key === 'onInput') {
                        element.addEventListener('input', attributes[key]);
                    } else {
                        element.setAttribute(key, attributes[key]);
                    }
                });

                children.forEach(child => {
                    if (typeof child === 'string') {
                        element.appendChild(document.createTextNode(child));
                    } else if (child instanceof HTMLElement) {
                        element.appendChild(child);
                    }
                });

                return element;
            }
        }

        // Login Component
        class LoginComponent extends Component {
            constructor(container, appState, onLogin) {
                super(container);
                this.appState = appState;
                this.onLogin = onLogin;
                this.showBackupForm = false;
            }

            render() {
                const loginContainer = this.createElement('div', { className: 'login-container fade-in' });
                
                const loginBox = this.createElement('div', { className: 'login-box' });
                
                // Header
                const header = this.createElement('div', { className: 'login-header' }, [
                    this.createElement('h1', {}, [APP_CONFIG.name]),
                    this.createElement('p', {}, ['Secure Dashboard Access'])
                ]);
                
                // Alert container
                const alertContainer = this.createElement('div', { id: 'loginAlert' });
                
                // Main login form
                const mainForm = this.createElement('form', { 
                    id: 'mainLoginForm',
                    onSubmit: (e) => this.handleLogin(e, false)
                }, [
                    this.createElement('div', { className: 'form-group' }, [
                        this.createElement('label', { for: 'mainPassword' }, ['Password']),
                        this.createElement('input', { 
                            type: 'password', 
                            id: 'mainPassword', 
                            className: 'form-control', 
                            required: true 
                        })
                    ]),
                    this.createElement('button', { type: 'submit', className: 'btn btn-primary' }, [
                        this.createElement('span', {}, ['Login'])
                    ])
                ]);

                // Backup form (initially hidden)
                const backupForm = this.createElement('form', { 
                    id: 'backupLoginForm',
                    className: this.showBackupForm ? '' : 'hidden',
                    onSubmit: (e) => this.handleLogin(e, true),
                    style: 'margin-top: 1rem;'
                }, [
                    this.createElement('div', { className: 'form-group' }, [
                        this.createElement('label', { for: 'backupPassword' }, ['Backup Password']),
                        this.createElement('input', { 
                            type: 'password', 
                            id: 'backupPassword', 
                            className: 'form-control', 
                            required: true 
                        })
                    ]),
                    this.createElement('button', { type: 'submit', className: 'btn btn-secondary' }, [
                        this.createElement('span', {}, ['Login with Backup'])
                    ]),
                    this.createElement('div', { style: 'text-align: center; margin-top: 0.5rem;' }, [
                        this.createElement('a', { 
                            href: '#', 
                            style: 'color: #7dd3fc; font-size: 14px;',
                            onClick: (e) => this.toggleBackupForm(e)
                        }, ['Back to main login'])
                    ])
                ]);

                // Forgot password link
                const forgotLink = this.createElement('div', { className: 'forgot-password' }, [
                    this.createElement('a', { 
                        href: '#',
                        onClick: (e) => this.toggleBackupForm(e)
                    }, ['Forgot Password? Use Backup'])
                ]);

                loginBox.appendChild(header);
                loginBox.appendChild(alertContainer);
                loginBox.appendChild(mainForm);
                loginBox.appendChild(backupForm);
                loginBox.appendChild(forgotLink);
                
                loginContainer.appendChild(loginBox);
                
                return loginContainer;
            }

            toggleBackupForm(e) {
                e.preventDefault();
                this.showBackupForm = !this.showBackupForm;
                
                const mainForm = document.getElementById('mainLoginForm');
                const backupForm = document.getElementById('backupLoginForm');
                
                if (this.showBackupForm) {
                    mainForm.classList.add('hidden');
                    backupForm.classList.remove('hidden');
                } else {
                    backupForm.classList.add('hidden');
                    mainForm.classList.remove('hidden');
                }
            }

            handleLogin(e, isBackup) {
                e.preventDefault();
                const passwordField = isBackup ? 'backupPassword' : 'mainPassword';
                const password = document.getElementById(passwordField).value;
                
                if (this.appState.validatePassword(password, isBackup)) {
                    this.appState.login('authenticated');
                    this.showAlert('Login successful!', 'success');
                    setTimeout(() => this.onLogin(), 500);
                } else {
                    this.showAlert('Invalid password. Please try again.', 'error');
                }
            }

            showAlert(message, type) {
                const alertContainer = document.getElementById('loginAlert');
                alertContainer.innerHTML = `
                    <div class="alert alert-${type}">
                        ${message}
                    </div>
                `;
            }
        }

        // Dashboard Component
        class DashboardComponent extends Component {
            constructor(container, appState, onLogout) {
                super(container);
                this.appState = appState;
                this.onLogout = onLogout;
            }

            render() {
                const container = this.createElement('div', { className: 'container fade-in' });
                
                // Sidebar
                const sidebar = this.createSidebar();
                
                // Main content
                const mainContent = this.createElement('div', { 
                    className: `main-content ${this.appState.sidebarOpen ? 'sidebar-open' : ''}`,
                    id: 'mainContent'
                });
                
                // Topbar
                const topbar = this.createTopbar();
                
                // Content area
                const content = this.createElement('div', { className: 'content', id: 'pageContent' });
                
                mainContent.appendChild(topbar);
                mainContent.appendChild(content);
                
                container.appendChild(sidebar);
                container.appendChild(mainContent);
                
                return container;
            }

            createSidebar() {
                const sidebar = this.createElement('nav', { 
                    className: `sidebar ${this.appState.sidebarOpen ? 'open' : ''}`,
                    id: 'sidebar'
                });
                
                const header = this.createElement('div', { className: 'sidebar-header' }, [
                    this.createElement('h1', {}, [APP_CONFIG.name])
                ]);
                
                const nav = this.createElement('ul', { className: 'sidebar-nav' }, [
                    this.createElement('li', {}, [
                        this.createElement('a', { 
                            className: this.appState.currentPage === 'broadcasts' ? 'active' : '',
                            onClick: () => this.switchPage('broadcasts')
                        }, ['📢 Broadcasts'])
                    ]),
                    this.createElement('li', {}, [
                        this.createElement('a', { 
                            className: this.appState.currentPage === 'settings' ? 'active' : '',
                            onClick: () => this.switchPage('settings')
                        }, ['⚙️ Settings'])
                    ])
                ]);
                
                sidebar.appendChild(header);
                sidebar.appendChild(nav);
                
                return sidebar;
            }

            createTopbar() {
                return this.createElement('div', { className: 'topbar' }, [
                    this.createElement('button', { 
                        className: 'menu-toggle',
                        onClick: () => this.toggleSidebar()
                    }, ['☰']),
                    this.createElement('button', { 
                        className: 'logout-btn',
                        onClick: () => this.handleLogout()
                    }, ['Logout'])
                ]);
            }

            toggleSidebar() {
                this.appState.sidebarOpen = !this.appState.sidebarOpen;
                const sidebar = document.getElementById('sidebar');
                const mainContent = document.getElementById('mainContent');
                
                sidebar.classList.toggle('open', this.appState.sidebarOpen);
                mainContent.classList.toggle('sidebar-open', this.appState.sidebarOpen);
            }

            switchPage(page) {
                this.appState.currentPage = page;
                
                // Update navigation
                document.querySelectorAll('.sidebar-nav a').forEach(link => {
                    link.classList.remove('active');
                });
                event.target.classList.add('active');
                
                // Load page content
                this.loadPageContent();
                
                // Close sidebar on mobile
                if (window.innerWidth <= 768) {
                    this.appState.sidebarOpen = false;
                    document.getElementById('sidebar').classList.remove('open');
                    document.getElementById('mainContent').classList.remove('sidebar-open');
                }
            }

            loadPageContent() {
                const contentContainer = document.getElementById('pageContent');
                contentContainer.innerHTML = '';
                
                if (this.appState.currentPage === 'broadcasts') {
                    const broadcastsPage = new BroadcastsPageComponent(contentContainer, this.appState);
                    broadcastsPage.mount();
                } else if (this.appState.currentPage === 'settings') {
                    const settingsPage = new SettingsPageComponent(contentContainer, this.appState);
                    settingsPage.mount();
                }
            }

            handleLogout() {
                this.appState.logout();
                this.onLogout();
            }

            afterMount() {
                this.loadPageContent();
                
                // Initialize desktop sidebar
                if (window.innerWidth > 768) {
                    this.appState.sidebarOpen = true;
                    document.getElementById('sidebar').classList.add('open');
                    document.getElementById('mainContent').classList.add('sidebar-open');
                }
            }
        }

        // Broadcasts Page Component
        class BroadcastsPageComponent extends Component {
            render() {
                const pageContainer = this.createElement('div', { className: 'slide-in' });
                
                // Create broadcast card
                const createCard = this.createBroadcastForm();
                
                // Recent broadcasts card
                const listCard = this.createBroadcastsList();
                
                pageContainer.appendChild(createCard);
                pageContainer.appendChild(listCard);
                
                return pageContainer;
            }

            createBroadcastForm() {
                const card = this.createElement('div', { className: 'card' });
                
                const header = this.createElement('div', { className: 'card-header' }, [
                    this.createElement('h2', {}, ['Create New Broadcast'])
                ]);
                
                const alertContainer = this.createElement('div', { id: 'broadcastAlert' });
                
                const form = this.createElement('form', { 
                    onSubmit: (e) => this.handleBroadcastSubmit(e)
                }, [
                    this.createElement('div', { className: 'form-group' }, [
                        this.createElement('label', { for: 'broadcastTitle' }, ['Title']),
                        this.createElement('input', { 
                            type: 'text', 
                            id: 'broadcastTitle', 
                            className: 'form-control', 
                            required: true,
                            placeholder: 'Enter broadcast title...'
                        })
                    ]),
                    this.createElement('div', { className: 'form-group' }, [
                        this.createElement('label', { for: 'broadcastBody' }, ['Message']),
                        this.createElement('textarea', { 
                            id: 'broadcastBody', 
                            className: 'form-control', 
                            required: true,
                            placeholder: 'Enter your broadcast message...'
                        })
                    ]),
                    this.createElement('button', { type: 'submit', className: 'btn btn-success' }, [
                        this.createElement('span', {}, ['📤 Send Broadcast'])
                    ])
                ]);
                
                card.appendChild(header);
                card.appendChild(alertContainer);
                card.appendChild(form);
                
                return card;
            }

            createBroadcastsList() {
                const card = this.createElement('div', { className: 'card' });
                
                const header = this.createElement('div', { className: 'card-header' }, [
                    this.createElement('h2', {}, ['Recent Broadcasts'])
                ]);
                
                const listContainer = this.createElement('div', { id: 'notificationsList' });
                
                card.appendChild(header);
                card.appendChild(listContainer);
                
                this.renderNotificationsList();
                
                return card;
            }

            renderNotificationsList() {
                const container = document.getElementById('notificationsList');
                
                if (!container) return;
                
                if (this.appState.notifications.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <h3>No broadcasts yet</h3>
                            <p>Create your first broadcast above</p>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = '';
                
                this.appState.notifications.forEach(notification => {
                    const notificationElement = this.createElement('div', { className: 'notification-item' }, [
                        this.createElement('div', { className: 'notification-header' }, [
                            this.createElement('h3', { className: 'notification-title' }, [this.escapeHtml(notification.title)]),
                            this.createElement('span', { className: 'notification-date' }, [notification.timestamp])
                        ]),
                        this.createElement('div', { className: 'notification-body' }, [this.escapeHtml(notification.body)]),
                        this.createElement('div', { className: 'notification-actions' }, [
                            this.createElement('button', { 
                                className: 'btn btn-danger',
                                onClick: () => this.handleDeleteBroadcast(notification.id)
                            }, ['🗑️ Delete'])
                        ])
                    ]);
                    
                    container.appendChild(notificationElement);
                });
            }

            handleBroadcastSubmit(e) {
                e.preventDefault();
                
                const title = document.getElementById('broadcastTitle').value.trim();
                const body = document.getElementById('broadcastBody').value.trim();
                
                if (!title || !body) {
                    this.showAlert('broadcastAlert', 'Please fill in all fields.', 'error');
                    return;
                }
                
                const broadcast = this.appState.addNotification({ title, body });
                
                // Clear form
                document.getElementById('broadcastTitle').value = '';
                document.getElementById('broadcastBody').value = '';
                
                // Update list
                this.renderNotificationsList();
                
                this.showAlert('broadcastAlert', '✅ Broadcast sent successfully!', 'success');
                
                // In a real app, you'd send this to your public API
                console.log('Broadcasting to FrankPort:', broadcast);
            }

            handleDeleteBroadcast(id) {
                if (confirm('Are you sure you want to delete this broadcast?')) {
                    this.appState.removeNotification(id);
                    this.renderNotificationsList();
                }
            }

            showAlert(containerId, message, type) {
                const container = document.getElementById(containerId);
                if (!container) return;
                
                container.innerHTML = `
                    <div class="alert alert-${type}">
                        ${message}
                    </div>
                `;
                
                setTimeout(() => {
                    container.innerHTML = '';
                }, 5000);
            }

            escapeHtml(unsafe) {
                return unsafe
                    .replace(/&/g, "&amp;")
                    .replace(/</g, "&lt;")
                    .replace(/>/g, "&gt;")
                    .replace(/"/g, "&quot;")
                    .replace(/'/g, "&#039;");
            }

            afterMount() {
                this.renderNotificationsList();
            }
        }

        // Settings Page Component
        class SettingsPageComponent extends Component {
            render() {
                const pageContainer = this.createElement('div', { className: 'slide-in' });
                
                // Password management card
                const passwordCard = this.createPasswordForm();
                
                // Statistics card
                const statsCard = this.createStatsCard();
                
                pageContainer.appendChild(passwordCard);
                pageContainer.appendChild(statsCard);
                
                return pageContainer;
            }

            createPasswordForm() {
                const card = this.createElement('div', { className: 'card' });
                
                const header = this.createElement('div', { className: 'card-header' }, [
                    this.createElement('h2', {}, ['Password Management'])
                ]);
                
                const alertContainer = this.createElement('div', { id: 'settingsAlert' });
                
                const form = this.createElement('form', { 
                    onSubmit: (e) => this.handlePasswordUpdate(e)
                }, [
                    this.createElement('div', { className: 'form-row' }, [
                        this.createElement('div', { className: 'form-group' }, [
                            this.createElement('label', { for: 'newMainPassword' }, ['New Main Password']),
                            this.createElement('input', { 
                                type: 'password', 
                                id: 'newMainPassword', 
                                className: 'form-control',
                                placeholder: 'Enter new main password'
                            })
                        ]),
                        this.createElement('div', { className: 'form-group' }, [
                            this.createElement('label', { for: 'newBackupPassword' }, ['New Backup Password']),
                            this.createElement('input', { 
                                type: 'password', 
                                id: 'newBackupPassword', 
                                className: 'form-control',
                                placeholder: 'Enter new backup password'
                            })
                        ])
                    ]),
                    this.createElement('button', { type: 'submit', className: 'btn btn-primary' }, [
                        this.createElement('span', {}, ['🔐 Update Passwords'])
                    ])
                ]);
                
                card.appendChild(header);
                card.appendChild(alertContainer);
                card.appendChild(form);
                
                return card;
            }

            createStatsCard() {
                const card = this.createElement('div', { className: 'card' });
                
                const header = this.createElement('div', { className: 'card-header' }, [
                    this.createElement('h2', {}, ['Dashboard Statistics'])
                ]);
                
                const statsGrid = this.createElement('div', { className: 'stats-grid' }, [
                    this.createElement('div', { className: 'stat-card' }, [
                        this.createElement('div', { className: 'stat-value', id: 'totalBroadcasts' }, ['0']),
                        this.createElement('div', { className: 'stat-label' }, ['Total Broadcasts'])
                    ]),
                    this.createElement('div', { className: 'stat-card' }, [
                        this.createElement('div', { className: 'stat-value', id: 'lastLoginTime' }, ['N/A']),
                        this.createElement('div', { className: 'stat-label' }, ['Last Login'])
                    ])
                ]);
                
                card.appendChild(header);
                card.appendChild(statsGrid);
                
                return card;
            }

            handlePasswordUpdate(e) {
                e.preventDefault();
                
                const newMain = document.getElementById('newMainPassword').value;
                const newBackup = document.getElementById('newBackupPassword').value;
                
                if (!newMain && !newBackup) {
                    this.showAlert('settingsAlert', 'Please enter at least one new password.', 'error');
                    return;
                }
                
                if (newMain && newMain.length < 6) {
                    this.showAlert('settingsAlert', 'Main password must be at least 6 characters.', 'error');
                    return;
                }
                
                if (newBackup && newBackup.length < 6) {
                    this.showAlert('settingsAlert', 'Backup password must be at least 6 characters.', 'error');
                    return;
                }
                
                this.appState.updatePasswords(newMain, newBackup);
                
                // Clear form
                document.getElementById('newMainPassword').value = '';
                document.getElementById('newBackupPassword').value = '';
                
                this.showAlert('settingsAlert', '✅ Passwords updated successfully!', 'success');
            }

            updateStats() {
                const totalElement = document.getElementById('totalBroadcasts');
                const lastLoginElement = document.getElementById('lastLoginTime');
                
                if (totalElement) {
                    totalElement.textContent = this.appState.notifications.length;
                }
                
                if (lastLoginElement) {
                    const lastLogin = sessionStorage.getItem('last_login');
                    if (lastLogin) {
                        const date = new Date(lastLogin);
                        lastLoginElement.textContent = date.toLocaleDateString();
                    }
                }
            }

            showAlert(containerId, message, type) {
                const container = document.getElementById(containerId);
                if (!container) return;
                
                container.innerHTML = `
                    <div class="alert alert-${type}">
                        ${message}
                    </div>
                `;
                
                setTimeout(() => {
                    container.innerHTML = '';
                }, 5000);
            }

            afterMount() {
                this.updateStats();
            }
        }

        // Main App Class
        class FrankPortAdminApp {
            constructor() {
                this.appState = new AppState();
                this.container = document.getElementById('app');
                this.currentComponent = null;
                
                this.init();
            }

            init() {
                // Load initial data
                this.appState.loadNotifications();
                
                // Check authentication and render appropriate view
                if (this.appState.checkAuth()) {
                    this.showDashboard();
                } else {
                    this.showLogin();
                }

                // Set up responsive behavior
                this.setupResponsiveHandlers();
            }

            showLogin() {
                this.clearContainer();
                this.currentComponent = new LoginComponent(
                    this.container, 
                    this.appState, 
                    () => this.showDashboard()
                );
                this.currentComponent.mount();
            }

            showDashboard() {
                this.clearContainer();
                this.currentComponent = new DashboardComponent(
                    this.container, 
                    this.appState, 
                    () => this.showLogin()
                );
                this.currentComponent.mount();
            }

            clearContainer() {
                if (this.currentComponent) {
                    this.currentComponent.unmount();
                }
                this.container.innerHTML = '';
            }

            setupResponsiveHandlers() {
                // Handle window resize
                window.addEventListener('resize', () => {
                    const sidebar = document.getElementById('sidebar');
                    const mainContent = document.getElementById('mainContent');
                    
                    if (sidebar && mainContent) {
                        if (window.innerWidth > 768) {
                            if (!this.appState.sidebarOpen) {
                                this.appState.sidebarOpen = true;
                                sidebar.classList.add('open');
                                mainContent.classList.add('sidebar-open');
                            }
                        } else {
                            mainContent.classList.remove('sidebar-open');
                        }
                    }
                });

                // Handle escape key to close sidebar on mobile
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && window.innerWidth <= 768) {
                        const sidebar = document.getElementById('sidebar');
                        const mainContent = document.getElementById('mainContent');
                        
                        if (sidebar && sidebar.classList.contains('open')) {
                            this.appState.sidebarOpen = false;
                            sidebar.classList.remove('open');
                            mainContent.classList.remove('sidebar-open');
                        }
                    }
                });
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new FrankPortAdminApp();
        });

        // Add some utility functions to window for debugging (optional)
        window.FrankPortAdmin = {
            version: APP_CONFIG.version,
            getState: () => window.app?.appState,
            clearData: () => {
                localStorage.removeItem('frankport_notifications');
                sessionStorage.clear();
                location.reload();
            }
        };
    </script>
</body>
</html>