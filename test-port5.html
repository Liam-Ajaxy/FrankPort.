<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeatherPro Advanced - Frank Nab</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #f093fb;
            --text-color: #ffffff;
            --card-bg: rgba(255,255,255,0.15);
            --card-border: rgba(255,255,255,0.2);
            --sidebar-width: 280px;
            --header-height: 70px;
            --border-radius: 16px;
            --blur-strength: 20px;
            --animation-speed: 0.3s;
            --theme-transition: all 0.5s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            min-height: 100vh;
            overflow-x: hidden;
            transition: var(--theme-transition);
        }

        /* Dynamic Weather Backgrounds */
        .weather-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            transition: var(--theme-transition);
        }

        .weather-bg.sunny { background: linear-gradient(135deg, #FFD89B 0%, #19547B 100%); }
        .weather-bg.rainy { background: linear-gradient(135deg, #4B79A1 0%, #283E51 100%); }
        .weather-bg.cloudy { background: linear-gradient(135deg, #BDC3C7 0%, #2C3E50 100%); }
        .weather-bg.snowy { background: linear-gradient(135deg, #E6DEDD 0%, #649173 100%); }
        .weather-bg.night { background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); }

        /* App Layout Container */
        .app-layout {
            display: flex;
            min-height: 100vh;
            position: relative;
        }

        /* Sidebar Styles */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(var(--blur-strength));
            border-right: 1px solid var(--card-border);
            transform: translateX(-100%);
            transition: transform var(--animation-speed) ease-in-out;
            z-index: 1000;
            overflow-y: auto;
        }

        .sidebar.open {
            transform: translateX(0);
        }

        .sidebar-content {
            padding: 20px;
        }

        .app-brand {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--card-border);
        }

        .app-logo {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .brand-info h1 {
            color: var(--text-color);
            font-size: 1.2rem;
            font-weight: 700;
        }

        .brand-info p {
            color: rgba(255,255,255,0.7);
            font-size: 0.8rem;
            margin-top: 2px;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 8px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: var(--text-color);
            text-decoration: none;
            border-radius: 10px;
            transition: all var(--animation-speed) ease;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .nav-link:hover, .nav-link.active {
            background: var(--card-bg);
            transform: translateX(3px);
        }

        .nav-link i {
            width: 18px;
            text-align: center;
            font-size: 16px;
        }

        /* Main Content Area */
        .main-wrapper {
            flex: 1;
            width: 100%;
            min-height: 100vh;
            transition: margin-left var(--animation-speed) ease;
        }

        .main-wrapper.sidebar-pushed {
            margin-left: var(--sidebar-width);
        }

        /* Header */
        .app-header {
            height: var(--header-height);
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border-bottom: 1px solid var(--card-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .menu-btn {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all var(--animation-speed) ease;
        }

        .menu-btn:hover {
            background: rgba(255,255,255,0.1);
            transform: scale(1.1);
        }

        .page-title {
            color: var(--text-color);
            font-size: 1.3rem;
            font-weight: 600;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            color: var(--text-color);
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all var(--animation-speed) ease;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .action-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-1px);
        }

        /* Content Sections */
        .content-area {
            padding: 25px;
        }

        .page-section {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .page-section.active {
            display: block;
        }

        /* Dashboard Grid */
        .dashboard-layout {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        /* Search Panel */
        .search-panel {
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border-radius: var(--border-radius);
            padding: 20px;
            border: 1px solid var(--card-border);
            margin-bottom: 25px;
        }

        .search-row {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-input-box {
            position: relative;
            flex: 1;
            min-width: 200px;
        }

        .search-field {
            width: 100%;
            padding: 12px 40px 12px 16px;
            border: 1px solid var(--card-border);
            border-radius: 12px;
            background: rgba(255,255,255,0.1);
            color: var(--text-color);
            font-size: 0.9rem;
            outline: none;
            transition: all var(--animation-speed) ease;
        }

        .search-field::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .search-field:focus {
            background: rgba(255,255,255,0.2);
            border-color: var(--accent-color);
        }

        .search-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-color);
            cursor: pointer;
            font-size: 16px;
            transition: all var(--animation-speed) ease;
        }

        .search-icon:hover {
            color: var(--accent-color);
            transform: translateY(-50%) scale(1.1);
        }

        .location-row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .location-select {
            padding: 10px 12px;
            border: 1px solid var(--card-border);
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: var(--text-color);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all var(--animation-speed) ease;
            min-width: 100px;
            flex: 1;
        }

        .location-select:hover, .location-select:focus {
            background: rgba(255,255,255,0.2);
            border-color: var(--accent-color);
        }

        /* Weather Cards */
        .weather-card {
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border-radius: var(--border-radius);
            padding: 25px;
            border: 1px solid var(--card-border);
            transition: all var(--animation-speed) ease;
            position: relative;
            overflow: hidden;
        }

        .weather-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        /* Current Weather Display */
        .current-weather {
            text-align: center;
            color: var(--text-color);
        }

        .weather-location {
            font-size: 1.6rem;
            margin-bottom: 12px;
            font-weight: 300;
            opacity: 0.9;
        }

        .weather-icon-main {
            font-size: 4rem;
            margin: 15px 0;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
        }

        .temperature-main {
            font-size: 3.5rem;
            font-weight: 100;
            margin: 15px 0;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .weather-desc {
            font-size: 1.2rem;
            margin-bottom: 25px;
            opacity: 0.85;
            text-transform: capitalize;
        }

        .weather-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .metric-item {
            text-align: center;
            padding: 15px;
            background: rgba(255,255,255,0.08);
            border-radius: 12px;
            transition: all var(--animation-speed) ease;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .metric-item:hover {
            transform: scale(1.03);
            background: rgba(255,255,255,0.15);
        }

        .metric-icon {
            font-size: 1.2rem;
            margin-bottom: 8px;
            color: var(--accent-color);
        }

        .metric-label {
            font-size: 0.75rem;
            opacity: 0.8;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .metric-value {
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* Forecast Panel */
        .forecast-panel {
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border-radius: var(--border-radius);
            padding: 20px;
            border: 1px solid var(--card-border);
        }

        .forecast-title {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
            color: var(--text-color);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .forecast-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .forecast-day {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            transition: all var(--animation-speed) ease;
        }

        .forecast-day:last-child {
            border-bottom: none;
        }

        .forecast-day:hover {
            background: rgba(255,255,255,0.08);
            margin: 0 -8px;
            padding: 12px 8px;
            border-radius: 8px;
        }

        .day-name {
            font-weight: 500;
            color: var(--text-color);
            min-width: 50px;
            font-size: 0.9rem;
        }

        .day-icon {
            font-size: 1.2rem;
            margin: 0 10px;
        }

        .day-temps {
            display: flex;
            gap: 8px;
            align-items: center;
            color: var(--text-color);
            font-size: 0.9rem;
        }

        .temp-high {
            font-weight: 600;
        }

        .temp-low {
            opacity: 0.7;
        }

        /* Settings Layout */
        .settings-layout {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .settings-section {
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border-radius: var(--border-radius);
            padding: 20px;
            border: 1px solid var(--card-border);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-color);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .setting-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .setting-info {
            flex: 1;
        }

        .setting-name {
            color: var(--text-color);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .setting-desc {
            color: rgba(255,255,255,0.7);
            font-size: 0.75rem;
            margin-top: 3px;
        }

        .toggle-control {
            position: relative;
            width: 44px;
            height: 22px;
            background: rgba(255,255,255,0.2);
            border-radius: 22px;
            cursor: pointer;
            transition: all var(--animation-speed) ease;
        }

        .toggle-control.active {
            background: var(--accent-color);
        }

        .toggle-thumb {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            transition: all var(--animation-speed) ease;
        }

        .toggle-control.active .toggle-thumb {
            transform: translateX(22px);
        }

        .setting-dropdown {
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--card-border);
            border-radius: 6px;
            color: var(--text-color);
            padding: 6px 10px;
            font-size: 0.8rem;
            cursor: pointer;
            min-width: 100px;
        }

        /* About Section */
        .about-layout {
            max-width: 700px;
            margin: 0 auto;
        }

        .app-showcase {
            text-align: center;
            margin-bottom: 35px;
        }

        .showcase-logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            margin: 0 auto 15px;
            box-shadow: 0 12px 30px rgba(0,0,0,0.3);
        }

        .app-name {
            color: var(--text-color);
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .app-tagline {
            color: rgba(255,255,255,0.8);
            font-size: 1rem;
            margin-bottom: 20px;
        }

        .app-description {
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border-radius: var(--border-radius);
            padding: 25px;
            border: 1px solid var(--card-border);
            color: var(--text-color);
            line-height: 1.6;
            margin-bottom: 25px;
            font-size: 0.95rem;
        }

        .features-showcase {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }

        .feature-card {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 18px;
            text-align: center;
            transition: all var(--animation-speed) ease;
        }

        .feature-card:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-3px);
        }

        .feature-icon {
            font-size: 2rem;
            color: var(--accent-color);
            margin-bottom: 12px;
        }

        .feature-name {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-color);
        }

        .feature-detail {
            font-size: 0.8rem;
            opacity: 0.8;
            color: var(--text-color);
        }

        .developer-card {
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border-radius: var(--border-radius);
            padding: 25px;
            border: 1px solid var(--card-border);
            text-align: center;
        }

        .dev-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            margin: 0 auto 12px;
        }

        .dev-name {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 4px;
        }

        .dev-role {
            color: rgba(255,255,255,0.8);
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .tech-badges {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .tech-badge {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 6px 12px;
            font-size: 0.75rem;
            color: var(--text-color);
        }

        /* Loading & Error States */
        .loading-state, .error-state {
            text-align: center;
            padding: 40px 20px;
            border-radius: var(--border-radius);
            margin: 20px 0;
        }

        .loading-state {
            color: var(--text-color);
            background: var(--card-bg);
            backdrop-filter: blur(var(--blur-strength));
            border: 1px solid var(--card-border);
        }

        .error-state {
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid rgba(255, 107, 107, 0.3);
        }

        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            border-top-color: var(--accent-color);
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        /* Overlay for Mobile */
        .mobile-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
            transition: opacity var(--animation-speed) ease;
        }

        .mobile-overlay.show {
            display: block;
        }

        /* Animations */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }

        /* Responsive Breakpoints */
        @media (max-width: 1200px) {
            .dashboard-layout {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            :root {
                --sidebar-width: 260px;
                --header-height: 60px;
            }

            .content-area {
                padding: 15px;
            }

            .search-row {
                flex-direction: column;
                align-items: stretch;
            }

            .location-row {
                flex-direction: column;
            }

            .weather-metrics {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .settings-layout {
                grid-template-columns: 1fr;
            }

            .features-showcase {
                grid-template-columns: 1fr;
            }

            .main-wrapper.sidebar-pushed {
                margin-left: 0;
            }
        }

        @media (max-width: 480px) {
            .weather-card {
                padding: 18px;
            }

            .temperature-main {
                font-size: 2.8rem;
            }

            .weather-icon-main {
                font-size: 3rem;
            }

            .header-actions {
                gap: 6px;
            }

            .action-btn {
                padding: 6px 8px;
                font-size: 0.8rem;
            }
        }

        /* Desktop Sidebar Always Visible */
        @media (min-width: 1024px) {
            .sidebar {
                position: static;
                transform: translateX(0);
                border-right: 1px solid var(--card-border);
            }

            .main-wrapper {
                margin-left: 0;
            }

            .menu-btn {
                display: none;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.5);
        }
    </style>
</head>
<body>
    <div class="weather-bg" id="weatherBg"></div>
    <div class="mobile-overlay" id="mobileOverlay"></div>
    
    <div class="app-layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="appSidebar">
            <div class="sidebar-content">
                <div class="app-brand">
                    <div class="app-logo">
                        <i class="fas fa-cloud-sun"></i>
                    </div>
                    <div class="brand-info">
                        <h1>WeatherPro</h1>
                        <p>Advanced Edition</p>
                    </div>
                </div>
                
                <nav>
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <a class="nav-link active" data-page="dashboard">
                                <i class="fas fa-tachometer-alt"></i>
                                Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-page="forecast">
                                <i class="fas fa-calendar-week"></i>
                                Extended Forecast
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-page="maps">
                                <i class="fas fa-satellite"></i>
                                Weather Maps
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-page="settings">
                                <i class="fas fa-cog"></i>
                                Settings
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-page="about">
                                <i class="fas fa-info-circle"></i>
                                About
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- Main Content Wrapper -->
        <div class="main-wrapper" id="mainWrapper">
            <!-- App Header -->
            <header class="app-header">
                <div class="header-left">
                    <button class="menu-btn" id="menuButton">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2 class="page-title" id="pageTitle">Weather Dashboard</h2>
                </div>
                <div class="header-actions">
                    <button class="action-btn" id="refreshButton">
                        <i class="fas fa-sync-alt"></i>
                        <span>Refresh</span>
                    </button>
                    <button class="action-btn" id="locationButton">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Location</span>
                    </button>
                </div>
            </header>

            <!-- Content Area -->
            <main class="content-area">
                <!-- Dashboard Page -->
                <section class="page-section active" id="dashboardPage">
                    <!-- Search Panel -->
                    <div class="search-panel">
                        <div class="search-row">
                            <div class="search-input-box">
                                <input type="text" class="search-field" id="searchInput" placeholder="Search any city worldwide...">
                                <i class="fas fa-search search-icon" id="searchButton"></i>
                            </div>
                        </div>
                        <div class="location-row">
                            <select class="location-select" id="countryDropdown">
                                <option value="">Select Country</option>
                            </select>
                            <select class="location-select" id="stateDropdown">
                                <option value="">Select State/Region</option>
                            </select>
                            <select class="location-select" id="cityDropdown">
                                <option value="">Select City</option>
                            </select>
                        </div>
                    </div>

                    <!-- Loading State -->
                    <div class="loading-state" id="loadingState" style="display: none;">
                        <div class="spinner"></div>
                        <div>Loading weather data...</div>
                    </div>

                    <!-- Error State -->
                    <div class="error-state" id="errorState" style="display: none;"></div>

                    <!-- Weather Dashboard -->
                    <div class="dashboard-layout" id="weatherDashboard" style="display: none;">
                        <div class="weather-card">
                            <div class="current-weather">
                                <div class="weather-location" id="currentLocation">-</div>
                                <div class="weather-icon-main" id="mainWeatherIcon">🌤️</div>
                                <div class="temperature-main" id="mainTemperature">-°</div>
                                <div class="weather-desc" id="weatherDescription">-</div>
                                
                                <div class="weather-metrics">
                                    <div class="metric-item">
                                        <div class="metric-icon"><i class="fas fa-thermometer-half"></i></div>
                                        <div class="metric-label">Feels Like</div>
                                        <div class="metric-value" id="feelsLikeTemp">-°</div>
                                    </div>
                                    <div class="metric-item">
                                        <div class="metric-icon"><i class="fas fa-tint"></i></div>
                                        <div class="metric-label">Humidity</div>
                                        <div class="metric-value" id="humidityValue">-%</div>
                                    </div>
                                    <div class="metric-item">
                                        <div class="metric-icon"><i class="fas fa-wind"></i></div>
                                        <div class="metric-label">Wind</div>
                                        <div class="metric-value" id="windValue">-</div>
                                    </div>
                                    <div class="metric-item">
                                        <div class="metric-icon"><i class="fas fa-compress-arrows-alt"></i></div>
                                        <div class="metric-label">Pressure</div>
                                        <div class="metric-value" id="pressureValue">-</div>
                                    </div>
                                    <div class="metric-item">
                                        <div class="metric-icon"><i class="fas fa-eye"></i></div>
                                        <div class="metric-label">Visibility</div>
                                        <div class="metric-value" id="visibilityValue">-</div>
                                    </div>
                                    <div class="metric-item">
                                        <div class="metric-icon"><i class="fas fa-sun"></i></div>
                                        <div class="metric-label">UV Index</div>
                                        <div class="metric-value" id="uvValue">-</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="forecast-panel">
                            <div class="forecast-title">
                                <i class="fas fa-calendar-alt"></i>
                                5-Day Forecast
                            </div>
                            <div class="forecast-list" id="forecastList"></div>
                        </div>
                    </div>
                </section>

                <!-- Extended Forecast Page -->
                <section class="page-section" id="forecastPage">
                    <div class="weather-card">
                        <h2 style="color: white; margin-bottom: 25px; text-align: center; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <i class="fas fa-chart-line"></i>
                            Extended Weather Forecast
                        </h2>
                        <div id="extendedForecastContent">
                            <div style="text-align: center; color: rgba(255,255,255,0.7); padding: 40px;">
                                <i class="fas fa-map-marker-alt" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.5;"></i>
                                <p>Select a location to view detailed extended forecast</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Weather Maps Page -->
                <section class="page-section" id="mapsPage">
                    <div class="weather-card">
                        <h2 style="color: white; margin-bottom: 25px; text-align: center; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <i class="fas fa-globe"></i>
                            Weather Maps & Radar
                        </h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <div class="weather-card" style="text-align: center; padding: 25px;">
                                <i class="fas fa-cloud-rain" style="font-size: 2.5rem; color: var(--accent-color); margin-bottom: 12px;"></i>
                                <h3 style="color: white; margin-bottom: 8px; font-size: 1.1rem;">Precipitation Radar</h3>
                                <p style="color: rgba(255,255,255,0.7); font-size: 0.85rem;">Real-time precipitation tracking</p>
                            </div>
                            <div class="weather-card" style="text-align: center; padding: 25px;">
                                <i class="fas fa-temperature-high" style="font-size: 2.5rem; color: var(--accent-color); margin-bottom: 12px;"></i>
                                <h3 style="color: white; margin-bottom: 8px; font-size: 1.1rem;">Temperature Map</h3>
                                <p style="color: rgba(255,255,255,0.7); font-size: 0.85rem;">Global temperature visualization</p>
                            </div>
                            <div class="weather-card" style="text-align: center; padding: 25px;">
                                <i class="fas fa-wind" style="font-size: 2.5rem; color: var(--accent-color); margin-bottom: 12px;"></i>
                                <h3 style="color: white; margin-bottom: 8px; font-size: 1.1rem;">Wind Patterns</h3>
                                <p style="color: rgba(255,255,255,0.7); font-size: 0.85rem;">Wind speed and direction</p>
                            </div>
                            <div class="weather-card" style="text-align: center; padding: 25px;">
                                <i class="fas fa-bolt" style="font-size: 2.5rem; color: var(--accent-color); margin-bottom: 12px;"></i>
                                <h3 style="color: white; margin-bottom: 8px; font-size: 1.1rem;">Lightning Activity</h3>
                                <p style="color: rgba(255,255,255,0.7); font-size: 0.85rem;">Storm tracking and alerts</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Settings Page -->
                <section class="page-section" id="settingsPage">
                    <div class="settings-layout">
                        <div class="settings-section">
                            <div class="section-header">
                                <i class="fas fa-palette"></i>
                                Appearance
                            </div>
                            <div class="setting-row">
                                <div class="setting-info">
                                    <div class="setting-name">Dark Theme</div>
                                    <div class="setting-desc">Switch to dark mode interface</div>
                                </div>
                                <div class="toggle-control" id="darkThemeToggle">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                            <div class="setting-row">
                                <div class="setting-info">
                                    <div class="setting-name">Dynamic Background</div>
                                    <div class="setting-desc">Background changes with weather</div>
                                </div>
                                <div class="toggle-control active" id="dynamicBgToggle">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                            <div class="setting-row">
                                <div class="setting-info">
                                    <div class="setting-name">Smooth Animations</div>
                                    <div class="setting-desc">Enable interface animations</div>
                                </div>
                                <div class="toggle-control active" id="animationsToggle">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                        </div>

                        <div class="settings-section">
                            <div class="section-header">
                                <i class="fas fa-ruler"></i>
                                Units & Display
                            </div>
                            <div class="setting-row">
                                <div class="setting-info">
                                    <div class="setting-name">Temperature Unit</div>
                                    <div class="setting-desc">Choose temperature scale</div>
                                </div>
                                <select class="setting-dropdown" id="temperatureUnit">
                                    <option value="celsius">Celsius (°C)</option>
                                    <option value="fahrenheit">Fahrenheit (°F)</option>
                                    <option value="kelvin">Kelvin (K)</option>
                                </select>
                            </div>
                            <div class="setting-row">
                                <div class="setting-info">
                                    <div class="setting-name">Wind Speed Unit</div>
                                    <div class="setting-desc">Choose wind measurement</div>
                                </div>
                                <select class="setting-dropdown" id="windSpeedUnit">
                                    <option value="kmh">km/h</option>
                                    <option value="mph">mph</option>
                                    <option value="ms">m/s</option>
                                </select>
                            </div>
                            <div class="setting-row">
                                <div class="setting-info">
                                    <div class="setting-name">Pressure Unit</div>
                                    <div class="setting-desc">Choose pressure measurement</div>
                                </div>
                                <select class="setting-dropdown" id="pressureUnitSelect">
                                    <option value="hpa">hPa</option>
                                    <option value="inHg">inHg</option>
                                    <option value="mmHg">mmHg</option>
                                </select>
                            </div>
                        </div>

                        <div class="settings-section">
                            <div class="section-header">
                                <i class="fas fa-bell"></i>
                                Notifications
                            </div>
                            <div class="setting-row">
                                <div class="setting-info">
                                    <div class="setting-name">Weather Alerts</div>
                                    <div class="setting-desc">Severe weather notifications</div>
                                </div>
                                <div class="toggle-control active" id="weatherAlertsToggle">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                            <div class="setting-row">
                                <div class="setting-info">
                                    <div class="setting-name">Daily Summary</div>
                                    <div class="setting-desc">Daily weather briefing</div>
                                </div>
                                <div class="toggle-control" id="dailySummaryToggle">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                        </div>

                        <div class="settings-section">
                            <div class="section-header">
                                <i class="fas fa-sync"></i>
                                Data & Updates
                            </div>
                            <div class="setting-row">
                                <div class="setting-info">
                                    <div class="setting-name">Auto Refresh</div>
                                    <div class="setting-desc">Automatically update data</div>
                                </div>
                                <div class="toggle-control active" id="autoRefreshToggle">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                            <div class="setting-row">
                                <div class="setting-info">
                                    <div class="setting-name">Update Interval</div>
                                    <div class="setting-desc">Frequency of updates</div>
                                </div>
                                <select class="setting-dropdown" id="updateInterval">
                                    <option value="5">5 minutes</option>
                                    <option value="15" selected>15 minutes</option>
                                    <option value="30">30 minutes</option>
                                    <option value="60">1 hour</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- About Page -->
                <section class="page-section" id="aboutPage">
                    <div class="about-layout">
                        <div class="app-showcase">
                            <div class="showcase-logo">
                                <i class="fas fa-cloud-sun"></i>
                            </div>
                            <div class="app-name">WeatherPro Advanced</div>
                            <div class="app-tagline">Professional Weather Intelligence Platform</div>
                        </div>

                        <div class="app-description">
                            <h3 style="margin-bottom: 12px; color: var(--accent-color); font-size: 1.1rem;">About WeatherPro Advanced</h3>
                            <p style="margin-bottom: 15px;">WeatherPro Advanced is a state-of-the-art weather application designed for professionals and weather enthusiasts who demand precision and comprehensive meteorological data. Built with cutting-edge web technologies, it delivers real-time weather information with an intuitive, beautiful interface.</p>
                            
                            <p style="margin-bottom: 15px;">Our platform integrates multiple weather data sources to provide the most accurate forecasts available, featuring advanced visualization tools, customizable dashboards, and intelligent weather analysis capabilities.</p>

                            <p>Whether you're planning your day, managing outdoor operations, or simply staying informed about weather conditions, WeatherPro Advanced provides the tools and insights you need with professional-grade accuracy and reliability.</p>
                        </div>

                        <div class="features-showcase">
                            <div class="feature-card">
                                <div class="feature-icon"><i class="fas fa-globe-americas"></i></div>
                                <div class="feature-name">Global Coverage</div>
                                <div class="feature-detail">Comprehensive weather data for 200,000+ locations worldwide</div>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
                                <div class="feature-name">Advanced Analytics</div>
                                <div class="feature-detail">Detailed forecasts with hourly precision and trend analysis</div>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon"><i class="fas fa-mobile-alt"></i></div>
                                <div class="feature-name">Responsive Design</div>
                                <div class="feature-detail">Optimized experience across all devices and screen sizes</div>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon"><i class="fas fa-palette"></i></div>
                                <div class="feature-name">Smart Themes</div>
                                <div class="feature-detail">Weather-adaptive backgrounds and customizable interface</div>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon"><i class="fas fa-bell"></i></div>
                                <div class="feature-name">Intelligent Alerts</div>
                                <div class="feature-detail">Smart notifications for severe weather and custom conditions</div>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon"><i class="fas fa-cogs"></i></div>
                                <div class="feature-name">Highly Customizable</div>
                                <div class="feature-detail">Extensive personalization options and advanced settings</div>
                            </div>
                        </div>

                        <div class="developer-card">
                            <div class="dev-avatar">FN</div>
                            <div class="dev-name">Frank Nab</div>
                            <div class="dev-role">Senior Full Stack Developer & UI/UX Architect</div>
                            <div class="tech-badges">
                                <div class="tech-badge">HTML5</div>
                                <div class="tech-badge">CSS3</div>
                                <div class="tech-badge">JavaScript ES6+</div>
                                <div class="tech-badge">REST APIs</div>
                                <div class="tech-badge">Responsive Design</div>
                                <div class="tech-badge">Modern UI/UX</div>
                                <div class="tech-badge">Progressive Web App</div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script>
        class WeatherProApp {
            constructor() {
                this.apiKey = '895284fb2d2c50a520ea537456963d9c';
                this.appSettings = {
                    temperatureUnit: 'celsius',
                    windSpeedUnit: 'kmh',
                    pressureUnit: 'hpa',
                    darkTheme: false,
                    dynamicBackground: true,
                    animations: true,
                    weatherAlerts: true,
                    dailySummary: false,
                    autoRefresh: true,
                    updateInterval: 15
                };
                this.worldLocations = {};
                this.activeLocation = null;
                this.autoRefreshTimer = null;
                this.initialize();
            }

            initialize() {
                this.setupWorldLocations();
                this.setupEventHandlers();
                this.loadUserSettings();
                this.detectUserLocation();
                this.initializeAutoRefresh();
            }

            setupWorldLocations() {
                this.worldLocations = {
                    "United States": {
                        "Alabama": ["Birmingham", "Montgomery", "Mobile", "Huntsville", "Tuscaloosa"],
                        "Alaska": ["Anchorage", "Fairbanks", "Juneau", "Sitka"],
                        "Arizona": ["Phoenix", "Tucson", "Mesa", "Chandler", "Scottsdale"],
                        "Arkansas": ["Little Rock", "Fort Smith", "Fayetteville", "Springdale"],
                        "California": ["Los Angeles", "San Francisco", "San Diego", "Sacramento", "San Jose", "Oakland"],
                        "Colorado": ["Denver", "Colorado Springs", "Aurora", "Fort Collins", "Lakewood"],
                        "Connecticut": ["Hartford", "Bridgeport", "New Haven", "Stamford", "Waterbury"],
                        "Delaware": ["Wilmington", "Dover", "Newark", "Middletown"],
                        "Florida": ["Miami", "Orlando", "Tampa", "Jacksonville", "Fort Lauderdale", "Tallahassee"],
                        "Georgia": ["Atlanta", "Augusta", "Columbus", "Savannah", "Athens"],
                        "Hawaii": ["Honolulu", "Hilo", "Kailua-Kona", "Kaneohe"],
                        "Idaho": ["Boise", "Meridian", "Nampa", "Idaho Falls"],
                        "Illinois": ["Chicago", "Aurora", "Rockford", "Joliet", "Naperville"],
                        "Indiana": ["Indianapolis", "Fort Wayne", "Evansville", "South Bend"],
                        "Iowa": ["Des Moines", "Cedar Rapids", "Davenport", "Sioux City"],
                        "Kansas": ["Wichita", "Overland Park", "Kansas City", "Topeka"],
                        "Kentucky": ["Louisville", "Lexington", "Bowling Green", "Owensboro"],
                        "Louisiana": ["New Orleans", "Baton Rouge", "Shreveport", "Lafayette"],
                        "Maine": ["Portland", "Lewiston", "Bangor", "South Portland"],
                        "Maryland": ["Baltimore", "Frederick", "Rockville", "Gaithersburg"],
                        "Massachusetts": ["Boston", "Worcester", "Springfield", "Lowell"],
                        "Michigan": ["Detroit", "Grand Rapids", "Warren", "Sterling Heights"],
                        "Minnesota": ["Minneapolis", "Saint Paul", "Rochester", "Duluth"],
                        "Mississippi": ["Jackson", "Gulfport", "Southaven", "Hattiesburg"],
                        "Missouri": ["Kansas City", "Saint Louis", "Springfield", "Columbia"],
                        "Montana": ["Billings", "Missoula", "Great Falls", "Bozeman"],
                        "Nebraska": ["Omaha", "Lincoln", "Bellevue", "Grand Island"],
                        "Nevada": ["Las Vegas", "Henderson", "Reno", "North Las Vegas"],
                        "New Hampshire": ["Manchester", "Nashua", "Concord", "Derry"],
                        "New Jersey": ["Newark", "Jersey City", "Paterson", "Elizabeth"],
                        "New Mexico": ["Albuquerque", "Las Cruces", "Rio Rancho", "Santa Fe"],
                        "New York": ["New York City", "Buffalo", "Rochester", "Syracuse", "Albany"],
                        "North Carolina": ["Charlotte", "Raleigh", "Greensboro", "Durham"],
                        "North Dakota": ["Fargo", "Bismarck", "Grand Forks", "Minot"],
                        "Ohio": ["Columbus", "Cleveland", "Cincinnati", "Toledo"],
                        "Oklahoma": ["Oklahoma City", "Tulsa", "Norman", "Broken Arrow"],
                        "Oregon": ["Portland", "Eugene", "Salem", "Gresham"],
                        "Pennsylvania": ["Philadelphia", "Pittsburgh", "Allentown", "Erie"],
                        "Rhode Island": ["Providence", "Warwick", "Cranston", "Pawtucket"],
                        "South Carolina": ["Charleston", "Columbia", "North Charleston", "Mount Pleasant"],
                        "South Dakota": ["Sioux Falls", "Rapid City", "Aberdeen", "Brookings"],
                        "Tennessee": ["Nashville", "Memphis", "Knoxville", "Chattanooga"],
                        "Texas": ["Houston", "San Antonio", "Dallas", "Austin", "Fort Worth", "El Paso"],
                        "Utah": ["Salt Lake City", "West Valley City", "Provo", "West Jordan"],
                        "Vermont": ["Burlington", "South Burlington", "Rutland", "Barre"],
                        "Virginia": ["Virginia Beach", "Norfolk", "Chesapeake", "Richmond"],
                        "Washington": ["Seattle", "Spokane", "Tacoma", "Vancouver"],
                        "West Virginia": ["Charleston", "Huntington", "Parkersburg", "Morgantown"],
                        "Wisconsin": ["Milwaukee", "Madison", "Green Bay", "Kenosha"],
                        "Wyoming": ["Cheyenne", "Casper", "Laramie", "Gillette"]
                    },
                    "Canada": {
                        "Ontario": ["Toronto", "Ottawa", "Mississauga", "Hamilton", "London", "Kitchener"],
                        "Quebec": ["Montreal", "Quebec City", "Laval", "Gatineau", "Longueuil"],
                        "British Columbia": ["Vancouver", "Surrey", "Burnaby", "Richmond", "Abbotsford"],
                        "Alberta": ["Calgary", "Edmonton", "Red Deer", "Lethbridge", "Medicine Hat"],
                        "Manitoba": ["Winnipeg", "Brandon", "Steinbach", "Thompson"],
                        "Saskatchewan": ["Saskatoon", "Regina", "Prince Albert", "Moose Jaw"],
                        "Nova Scotia": ["Halifax", "Sydney", "Dartmouth", "Truro"],
                        "New Brunswick": ["Moncton", "Saint John", "Fredericton", "Dieppe"],
                        "Newfoundland and Labrador": ["St. John's", "Mount Pearl", "Corner Brook", "Conception Bay South"],
                        "Prince Edward Island": ["Charlottetown", "Summerside", "Stratford"],
                        "Northwest Territories": ["Yellowknife", "Hay River", "Inuvik"],
                        "Yukon": ["Whitehorse", "Dawson City", "Watson Lake"],
                        "Nunavut": ["Iqaluit", "Rankin Inlet", "Arviat"]
                    },
                    "United Kingdom": {
                        "England": ["London", "Birmingham", "Manchester", "Liverpool", "Leeds", "Sheffield", "Bristol"],
                        "Scotland": ["Glasgow", "Edinburgh", "Aberdeen", "Dundee", "Stirling"],
                        "Wales": ["Cardiff", "Swansea", "Newport", "Wrexham", "Barry"],
                        "Northern Ireland": ["Belfast", "Derry", "Lisburn", "Newtownabbey", "Bangor"]
                    },
                    "Australia": {
                        "New South Wales": ["Sydney", "Newcastle", "Central Coast", "Wollongong", "Maitland"],
                        "Victoria": ["Melbourne", "Geelong", "Ballarat", "Bendigo", "Frankston"],
                        "Queensland": ["Brisbane", "Gold Coast", "Townsville", "Cairns", "Toowoomba"],
                        "Western Australia": ["Perth", "Fremantle", "Rockingham", "Mandurah", "Bunbury"],
                        "South Australia": ["Adelaide", "Mount Gambier", "Murray Bridge", "Port Lincoln"],
                        "Tasmania": ["Hobart", "Launceston", "Devonport", "Burnie"],
                        "Northern Territory": ["Darwin", "Alice Springs", "Katherine", "Nhulunbuy"],
                        "Australian Capital Territory": ["Canberra"]
                    },
                    "Germany": {
                        "Bavaria": ["Munich", "Nuremberg", "Augsburg", "Würzburg", "Regensburg"],
                        "North Rhine-Westphalia": ["Cologne", "Düsseldorf", "Dortmund", "Essen", "Duisburg"],
                        "Baden-Württemberg": ["Stuttgart", "Mannheim", "Karlsruhe", "Freiburg", "Heidelberg"],
                        "Lower Saxony": ["Hanover", "Braunschweig", "Oldenburg", "Osnabrück", "Wolfsburg"],
                        "Hesse": ["Frankfurt", "Wiesbaden", "Kassel", "Darmstadt", "Offenbach"],
                        "Berlin": ["Berlin"],
                        "Hamburg": ["Hamburg"],
                        "Bremen": ["Bremen", "Bremerhaven"]
                    },
                    "France": {
                        "Île-de-France": ["Paris", "Boulogne-Billancourt", "Saint-Denis", "Argenteuil", "Versailles"],
                        "Provence-Alpes-Côte d'Azur": ["Marseille", "Nice", "Toulon", "Aix-en-Provence", "Antibes"],
                        "Auvergne-Rhône-Alpes": ["Lyon", "Saint-Étienne", "Grenoble", "Villeurbanne", "Clermont-Ferrand"],
                        "Occitanie": ["Toulouse", "Montpellier", "Nîmes", "Perpignan", "Béziers"],
                        "Hauts-de-France": ["Lille", "Amiens", "Tourcoing", "Roubaix", "Calais"],
                        "Grand Est": ["Strasbourg", "Metz", "Nancy", "Reims", "Mulhouse"],
                        "Nouvelle-Aquitaine": ["Bordeaux", "Limoges", "Poitiers", "Pau", "La Rochelle"],
                        "Brittany": ["Rennes", "Brest", "Quimper", "Lorient", "Vannes"]
                    },
                    "Japan": {
                        "Tokyo": ["Tokyo", "Shibuya", "Shinjuku", "Harajuku", "Ginza"],
                        "Osaka": ["Osaka", "Sakai", "Higashiosaka", "Hirakata", "Suita"],
                        "Kanagawa": ["Yokohama", "Kawasaki", "Sagamihara", "Fujisawa", "Chigasaki"],
                        "Aichi": ["Nagoya", "Toyota", "Okazaki", "Ichinomiya", "Kasugai"],
                        "Saitama": ["Saitama", "Kawaguchi", "Kawagoe", "Tokorozawa", "Koshigaya"],
                        "Chiba": ["Chiba", "Funabashi", "Matsudo", "Ichikawa", "Kashiwa"],
                        "Hyogo": ["Kobe", "Himeji", "Nishinomiya", "Amagasaki", "Akashi"],
                        "Hokkaido": ["Sapporo", "Asahikawa", "Hakodate", "Kushiro", "Tomakomai"]
                    },
                    "India": {
                        "Maharashtra": ["Mumbai", "Pune", "Nagpur", "Nashik", "Aurangabad"],
                        "Delhi": ["New Delhi", "Delhi"],
                        "Karnataka": ["Bangalore", "Mysore", "Hubli", "Mangalore", "Belgaum"],
                        "Tamil Nadu": ["Chennai", "Coimbatore", "Madurai", "Tiruchirappalli", "Salem"],
                        "West Bengal": ["Kolkata", "Howrah", "Durgapur", "Asansol", "Siliguri"],
                        "Gujarat": ["Ahmedabad", "Surat", "Vadodara", "Rajkot", "Bhavnagar"],
                        "Rajasthan": ["Jaipur", "Jodhpur", "Kota", "Bikaner", "Udaipur"],
                        "Uttar Pradesh": ["Lucknow", "Kanpur", "Ghaziabad", "Agra", "Varanasi"]
                    },
                    "Brazil": {
                        "São Paulo": ["São Paulo", "Guarulhos", "Campinas", "São Bernardo do Campo", "Santos"],
                        "Rio de Janeiro": ["Rio de Janeiro", "São Gonçalo", "Duque de Caxias", "Nova Iguaçu", "Niterói"],
                        "Minas Gerais": ["Belo Horizonte", "Uberlândia", "Contagem", "Juiz de Fora", "Betim"],
                        "Bahia": ["Salvador", "Feira de Santana", "Vitória da Conquista", "Camaçari", "Juazeiro"],
                        "Rio Grande do Sul": ["Porto Alegre", "Caxias do Sul", "Pelotas", "Canoas", "Santa Maria"],
                        "Paraná": ["Curitiba", "Londrina", "Maringá", "Ponta Grossa", "Cascavel"],
                        "Pernambuco": ["Recife", "Jaboatão dos Guararapes", "Olinda", "Caruaru", "Petrolina"],
                        "Ceará": ["Fortaleza", "Caucaia", "Juazeiro do Norte", "Maracanaú", "Sobral"]
                    },
                    "China": {
                        "Beijing": ["Beijing", "Chaoyang", "Haidian", "Dongcheng"],
                        "Shanghai": ["Shanghai", "Pudong", "Huangpu", "Xuhui"],
                        "Guangdong": ["Guangzhou", "Shenzhen", "Dongguan", "Foshan", "Zhongshan"],
                        "Jiangsu": ["Nanjing", "Suzhou", "Wuxi", "Changzhou", "Xuzhou"],
                        "Zhejiang": ["Hangzhou", "Ningbo", "Wenzhou", "Shaoxing", "Huzhou"],
                        "Shandong": ["Jinan", "Qingdao", "Yantai", "Weifang", "Zibo"],
                        "Henan": ["Zhengzhou", "Luoyang", "Xinxiang", "Anyang", "Kaifeng"],
                        "Hubei": ["Wuhan", "Yichang", "Xiangyang", "Jingzhou", "Huangshi"]
                    }
                };

                this.populateCountryOptions();
            }

            populateCountryOptions() {
                const countrySelect = document.getElementById('countryDropdown');
                countrySelect.innerHTML = '<option value="">Select Country</option>';
                
                Object.keys(this.worldLocations).sort().forEach(country => {
                    const option = document.createElement('option');
                    option.value = country;
                    option.textContent = country;
                    countrySelect.appendChild(option);
                });
            }

            setupEventHandlers() {
                // Navigation
                document.getElementById('menuButton').addEventListener('click', () => this.toggleNavigation());
                document.getElementById('mobileOverlay').addEventListener('click', () => this.closeNavigation());
                
                // Page navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const page = link.getAttribute('data-page');
                        this.navigateToPage(page);
                        if (window.innerWidth <= 1023) this.closeNavigation();
                    });
                });

                // Search functionality
                document.getElementById('searchButton').addEventListener('click', () => this.performSearch());
                document.getElementById('searchInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.performSearch();
                });

                // Location dropdowns
                document.getElementById('countryDropdown').addEventListener('change', (e) => this.handleCountrySelection(e));
                document.getElementById('stateDropdown').addEventListener('change', (e) => this.handleStateSelection(e));
                document.getElementById('cityDropdown').addEventListener('change', (e) => this.handleCitySelection(e));

                // Header actions
                document.getElementById('refreshButton').addEventListener('click', () => this.refreshCurrentWeather());
                document.getElementById('locationButton').addEventListener('click', () => this.detectUserLocation());

                // Settings controls
                this.setupSettingsHandlers();

                // Responsive handling
                window.addEventListener('resize', () => {
                    if (window.innerWidth > 1023) {
                        this.closeNavigation();
                    }
                });
            }

            setupSettingsHandlers() {
                // Toggle switches
                document.querySelectorAll('.toggle-control').forEach(toggle => {
                    toggle.addEventListener('click', () => {
                        toggle.classList.toggle('active');
                        const settingKey = toggle.id.replace('Toggle', '');
                        this.appSettings[settingKey] = toggle.classList.contains('active');
                        this.saveUserSettings();
                        this.applyCurrentSettings();
                    });
                });

                // Dropdown settings
                document.querySelectorAll('.setting-dropdown').forEach(dropdown => {
                    dropdown.addEventListener('change', (e) => {
                        const settingKey = e.target.id.replace('Select', '').replace('Unit', 'Unit');
                        this.appSettings[settingKey] = e.target.value;
                        this.saveUserSettings();
                        this.applyCurrentSettings();
                    });
                });
            }

            toggleNavigation() {
                const sidebar = document.getElementById('appSidebar');
                const overlay = document.getElementById('mobileOverlay');
                const mainWrapper = document.getElementById('mainWrapper');
                
                if (window.innerWidth > 1023) {
                    // Desktop behavior
                    sidebar.classList.toggle('open');
                    mainWrapper.classList.toggle('sidebar-pushed');
                } else {
                    // Mobile/tablet behavior
                    sidebar.classList.toggle('open');
                    overlay.classList.toggle('show');
                }
            }

            closeNavigation() {
                const sidebar = document.getElementById('appSidebar');
                const overlay = document.getElementById('mobileOverlay');
                const mainWrapper = document.getElementById('mainWrapper');
                
                sidebar.classList.remove('open');
                overlay.classList.remove('show');
                
                if (window.innerWidth > 1023) {
                    mainWrapper.classList.remove('sidebar-pushed');
                }
            }

            navigateToPage(pageId) {
                // Hide all pages
                document.querySelectorAll('.page-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                // Show selected page
                document.getElementById(pageId + 'Page').classList.add('active');
                
                // Update navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                document.querySelector(`[data-page="${pageId}"]`).classList.add('active');
                
                // Update page title
                const pageTitles = {
                    dashboard: 'Weather Dashboard',
                    forecast: 'Extended Forecast',
                    maps: 'Weather Maps',
                    settings: 'Settings',
                    about: 'About WeatherPro'
                };
                document.getElementById('pageTitle').textContent = pageTitles[pageId] || 'WeatherPro';
            }

            handleCountrySelection(e) {
                const selectedCountry = e.target.value;
                const stateSelect = document.getElementById('stateDropdown');
                const citySelect = document.getElementById('cityDropdown');
                
                // Reset dependent dropdowns
                stateSelect.innerHTML = '<option value="">Select State/Region</option>';
                citySelect.innerHTML = '<option value="">Select City</option>';
                
                if (selectedCountry && this.worldLocations[selectedCountry]) {
                    Object.keys(this.worldLocations[selectedCountry]).sort().forEach(state => {
                        const option = document.createElement('option');
                        option.value = state;
                        option.textContent = state;
                        stateSelect.appendChild(option);
                    });
                }
            }

            handleStateSelection(e) {
                const selectedCountry = document.getElementById('countryDropdown').value;
                const selectedState = e.target.value;
                const citySelect = document.getElementById('cityDropdown');
                
                // Reset city dropdown
                citySelect.innerHTML = '<option value="">Select City</option>';
                
                if (selectedCountry && selectedState && this.worldLocations[selectedCountry][selectedState]) {
                    this.worldLocations[selectedCountry][selectedState].sort().forEach(city => {
                        const option = document.createElement('option');
                        option.value = city;
                        option.textContent = city;
                        citySelect.appendChild(option);
                    });
                }
            }

            handleCitySelection(e) {
                const selectedCity = e.target.value;
                const selectedState = document.getElementById('stateDropdown').value;
                const selectedCountry = document.getElementById('countryDropdown').value;
                
                if (selectedCity) {
                    let searchQuery = selectedCity;
                    if (selectedState && selectedCountry) {
                        searchQuery = `${selectedCity}, ${selectedState}, ${selectedCountry}`;
                    } else if (selectedCountry) {
                        searchQuery = `${selectedCity}, ${selectedCountry}`;
                    }
                    
                    document.getElementById('searchInput').value = searchQuery;
                    this.fetchWeatherByCity(searchQuery);
                }
            }

            detectUserLocation() {
                if (navigator.geolocation) {
                    this.showLoadingState();
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const latitude = position.coords.latitude;
                            const longitude = position.coords.longitude;
                            this.fetchWeatherByCoordinates(latitude, longitude);
                        },
                        () => {
                            this.fetchWeatherByCity('New York');
                        }
                    );
                } else {
                    this.fetchWeatherByCity('New York');
                }
            }

            performSearch() {
                const searchQuery = document.getElementById('searchInput').value.trim();
                if (searchQuery) {
                    this.fetchWeatherByCity(searchQuery);
                }
            }

            refreshCurrentWeather() {
                if (this.activeLocation) {
                    if (this.activeLocation.coordinates) {
                        this.fetchWeatherByCoordinates(this.activeLocation.coordinates.lat, this.activeLocation.coordinates.lon);
                    } else {
                        this.fetchWeatherByCity(this.activeLocation.name);
                    }
                } else {
                    this.detectUserLocation();
                }
            }

            async fetchWeatherByCity(cityName) {
                this.showLoadingState();
                try {
                    const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(cityName)}&appid=${this.apiKey}&units=metric`);
                    if (!response.ok) throw new Error('Location not found');
                    
                    const weatherData = await response.json();
                    this.activeLocation = { 
                        name: cityName, 
                        coordinates: { lat: weatherData.coord.lat, lon: weatherData.coord.lon } 
                    };
                    
                    this.renderWeatherData(weatherData);
                    this.fetchForecastData(weatherData.coord.lat, weatherData.coord.lon);
                    this.fetchExtendedForecast(weatherData.coord.lat, weatherData.coord.lon);
                } catch (error) {
                    this.showErrorState('Location not found. Please check the spelling and try again.');
                }
            }

            async fetchWeatherByCoordinates(lat, lon) {
                this.showLoadingState();
                try {
                    const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${this.apiKey}&units=metric`);
                    const weatherData = await response.json();
                    
                    this.activeLocation = { coordinates: { lat, lon } };
                    this.renderWeatherData(weatherData);
                    this.fetchForecastData(lat, lon);
                    this.fetchExtendedForecast(lat, lon);
                } catch (error) {
                    this.showErrorState('Unable to retrieve weather data for your location.');
                }
            }

            async fetchForecastData(lat, lon) {
                try {
                    const response = await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${this.apiKey}&units=metric`);
                    const forecastData = await response.json();
                    this.renderForecastData(forecastData);
                } catch (error) {
                    console.error('Forecast fetch error:', error);
                }
            }

            async fetchExtendedForecast(lat, lon) {
                try {
                    const response = await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${this.apiKey}&units=metric`);
                    const extendedData = await response.json();
                    this.renderExtendedForecast(extendedData);
                } catch (error) {
                    console.error('Extended forecast error:', error);
                }
            }

            renderWeatherData(data) {
                const tempUnit = this.appSettings.temperatureUnit;
                const windUnit = this.appSettings.windSpeedUnit;
                const pressureUnit = this.appSettings.pressureUnit;

                // Temperature conversion
                let currentTemp = data.main.temp;
                let feelsLikeTemp = data.main.feels_like;
                let tempSymbol = '°C';

                if (tempUnit === 'fahrenheit') {
                    currentTemp = (currentTemp * 9/5) + 32;
                    feelsLikeTemp = (feelsLikeTemp * 9/5) + 32;
                    tempSymbol = '°F';
                } else if (tempUnit === 'kelvin') {
                    currentTemp = currentTemp + 273.15;
                    feelsLikeTemp = feelsLikeTemp + 273.15;
                    tempSymbol = 'K';
                }

                // Wind speed conversion
                let windSpeed = data.wind.speed * 3.6; // m/s to km/h
                let windSymbol = 'km/h';

                if (windUnit === 'mph') {
                    windSpeed = windSpeed * 0.621371;
                    windSymbol = 'mph';
                } else if (windUnit === 'ms') {
                    windSpeed = data.wind.speed;
                    windSymbol = 'm/s';
                }

                // Pressure conversion
                let pressureValue = data.main.pressure;
                let pressureSymbol = 'hPa';

                if (pressureUnit === 'inHg') {
                    pressureValue = pressureValue * 0.02953;
                    pressureSymbol = 'inHg';
                } else if (pressureUnit === 'mmHg') {
                    pressureValue = pressureValue * 0.750062;
                    pressureSymbol = 'mmHg';
                }

                // Update weather display
                document.getElementById('currentLocation').textContent = `${data.name}, ${data.sys.country}`;
                document.getElementById('mainTemperature').textContent = `${Math.round(currentTemp)}${tempSymbol}`;
                document.getElementById('weatherDescription').textContent = data.weather[0].description;
                document.getElementById('feelsLikeTemp').textContent = `${Math.round(feelsLikeTemp)}${tempSymbol}`;
                document.getElementById('humidityValue').textContent = `${data.main.humidity}%`;
                document.getElementById('windValue').textContent = `${Math.round(windSpeed)} ${windSymbol}`;
                document.getElementById('pressureValue').textContent = `${Math.round(pressureValue)} ${pressureSymbol}`;
                document.getElementById('visibilityValue').textContent = `${(data.visibility / 1000).toFixed(1)} km`;

                // Weather icon
                const weatherIcon = this.getWeatherEmoji(data.weather[0].main, data.weather[0].icon);
                document.getElementById('mainWeatherIcon').textContent = weatherIcon;

                // UV Index (simulated - API doesn't provide free UV data)
                document.getElementById('uvValue').textContent = Math.floor(Math.random() * 10) + 1;

                // Update background if enabled
                if (this.appSettings.dynamicBackground) {
                    this.updateWeatherBackground(data.weather[0].main, data.weather[0].icon);
                }

                this.hideLoadingState();
            }

            renderForecastData(data) {
                const forecastContainer = document.getElementById('forecastList');
                forecastContainer.innerHTML = '';

                // Group forecasts by day
                const dailyForecasts = {};
                data.list.forEach(item => {
                    const date = new Date(item.dt * 1000);
                    const dayKey = date.toDateString();
                    if (!dailyForecasts[dayKey] || date.getHours() === 12) {
                        dailyForecasts[dayKey] = item;
                    }
                });

                const forecastDays = Object.values(dailyForecasts).slice(0, 5);

                forecastDays.forEach(forecast => {
                    const date = new Date(forecast.dt * 1000);
                    const dayName = date.toLocaleDateString('en', { weekday: 'short' });
                    
                    let tempHigh = Math.round(forecast.main.temp_max);
                    let tempLow = Math.round(forecast.main.temp_min);

                    // Convert temperatures
                    if (this.appSettings.temperatureUnit === 'fahrenheit') {
                        tempHigh = Math.round((tempHigh * 9/5) + 32);
                        tempLow = Math.round((tempLow * 9/5) + 32);
                    } else if (this.appSettings.temperatureUnit === 'kelvin') {
                        tempHigh = Math.round(tempHigh + 273.15);
                        tempLow = Math.round(tempLow + 273.15);
                    }

                    const tempSymbol = this.appSettings.temperatureUnit === 'fahrenheit' ? '°F' : 
                                     this.appSettings.temperatureUnit === 'kelvin' ? 'K' : '°C';
                    const weatherIcon = this.getWeatherEmoji(forecast.weather[0].main, forecast.weather[0].icon);

                    const forecastElement = document.createElement('div');
                    forecastElement.className = 'forecast-day';
                    forecastElement.innerHTML = `
                        <div class="day-name">${dayName}</div>
                        <div class="day-icon">${weatherIcon}</div>
                        <div class="day-temps">
                            <div class="temp-high">${tempHigh}${tempSymbol}</div>
                            <div class="temp-low">${tempLow}${tempSymbol}</div>
                        </div>
                    `;
                    forecastContainer.appendChild(forecastElement);
                });
            }

            renderExtendedForecast(data) {
                const extendedContainer = document.getElementById('extendedForecastContent');
                extendedContainer.innerHTML = '';

                // Group hourly data by days
                const dailyGrouped = {};
                data.list.forEach(item => {
                    const date = new Date(item.dt * 1000);
                    const dayKey = date.toDateString();
                    if (!dailyGrouped[dayKey]) {
                        dailyGrouped[dayKey] = [];
                    }
                    dailyGrouped[dayKey].push(item);
                });

                Object.entries(dailyGrouped).slice(0, 5).forEach(([day, hourlyData]) => {
                    const date = new Date(day);
                    const dayCard = document.createElement('div');
                    dayCard.className = 'weather-card';
                    dayCard.style.marginBottom = '20px';

                    let dayHigh = Math.max(...hourlyData.map(h => h.main.temp_max));
                    let dayLow = Math.min(...hourlyData.map(h => h.main.temp_min));

                    if (this.appSettings.temperatureUnit === 'fahrenheit') {
                        dayHigh = (dayHigh * 9/5) + 32;
                        dayLow = (dayLow * 9/5) + 32;
                    } else if (this.appSettings.temperatureUnit === 'kelvin') {
                        dayHigh = dayHigh + 273.15;
                        dayLow = dayLow + 273.15;
                    }

                    const tempSymbol = this.appSettings.temperatureUnit === 'fahrenheit' ? '°F' : 
                                     this.appSettings.temperatureUnit === 'kelvin' ? 'K' : '°C';

                    dayCard.innerHTML = `
                        <h3 style="color: white; margin-bottom: 20px; text-align: center; font-size: 1.2rem;">
                            ${date.toLocaleDateString('en', { weekday: 'long', month: 'long', day: 'numeric' })}
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px;">
                            ${hourlyData.slice(0, 8).map(hour => {
                                const time = new Date(hour.dt * 1000);
                                let hourTemp = hour.main.temp;
                                
                                if (this.appSettings.temperatureUnit === 'fahrenheit') {
                                    hourTemp = (hourTemp * 9/5) + 32;
                                } else if (this.appSettings.temperatureUnit === 'kelvin') {
                                    hourTemp = hourTemp + 273.15;
                                }
                                
                                return `
                                    <div class="metric-item">
                                        <div class="metric-label">${time.toLocaleTimeString('en', { hour: '2-digit', minute: '2-digit' })}</div>
                                        <div style="font-size: 1.8rem; margin: 8px 0;">${this.getWeatherEmoji(hour.weather[0].main, hour.weather[0].icon)}</div>
                                        <div class="metric-value">${Math.round(hourTemp)}${tempSymbol}</div>
                                        <div style="font-size: 0.75rem; opacity: 0.7; margin-top: 4px;">${hour.weather[0].description}</div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                        <div style="margin-top: 20px; text-align: center; color: rgba(255,255,255,0.8); font-size: 0.9rem;">
                            High: ${Math.round(dayHigh)}${tempSymbol} • Low: ${Math.round(dayLow)}${tempSymbol}
                        </div>
                    `;
                    extendedContainer.appendChild(dayCard);
                });
            }

            getWeatherEmoji(weatherMain, iconCode) {
                const emojiMap = {
                    'Clear': '☀️',
                    'Clouds': '☁️',
                    'Rain': '🌧️',
                    'Drizzle': '🌦️',
                    'Thunderstorm': '⛈️',
                    'Snow': '❄️',
                    'Mist': '🌫️',
                    'Fog': '🌫️',
                    'Haze': '🌫️',
                    'Smoke': '💨',
                    'Dust': '🌪️',
                    'Sand': '🌪️',
                    'Ash': '🌋',
                    'Squall': '💨',
                    'Tornado': '🌪️'
                };
                
                // Night variations
                if (iconCode && iconCode.includes('n')) {
                    if (weatherMain === 'Clear') return '🌙';
                    if (weatherMain === 'Clouds') return '☁️';
                }
                
                return emojiMap[weatherMain] || '🌤️';
            }

            updateWeatherBackground(weatherMain, iconCode) {
                const background = document.getElementById('weatherBg');
                background.className = 'weather-bg';
                
                const isNightTime = iconCode && iconCode.includes('n');
                
                if (isNightTime) {
                    background.classList.add('night');
                } else {
                    switch (weatherMain.toLowerCase()) {
                        case 'clear':
                            background.classList.add('sunny');
                            break;
                        case 'rain':
                        case 'drizzle':
                        case 'thunderstorm':
                            background.classList.add('rainy');
                            break;
                        case 'clouds':
                            background.classList.add('cloudy');
                            break;
                        case 'snow':
                            background.classList.add('snowy');
                            break;
                        default:
                            background.classList.add('cloudy');
                    }
                }
            }

            showLoadingState() {
                document.getElementById('loadingState').style.display = 'block';
                document.getElementById('weatherDashboard').style.display = 'none';
                document.getElementById('errorState').style.display = 'none';
            }

            hideLoadingState() {
                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('weatherDashboard').style.display = 'grid';
                document.getElementById('errorState').style.display = 'none';
            }

            showErrorState(message) {
                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('weatherDashboard').style.display = 'none';
                document.getElementById('errorState').style.display = 'block';
                document.getElementById('errorState').textContent = message;
            }

            loadUserSettings() {
                try {
                    const savedSettings = JSON.parse(localStorage.getItem('weatherProSettings') || '{}');
                    this.appSettings = { ...this.appSettings, ...savedSettings };
                } catch (error) {
                    console.log('Settings load error, using defaults');
                }
                this.applyCurrentSettings();
                this.updateSettingsInterface();
            }

            saveUserSettings() {
                try {
                    localStorage.setItem('weatherProSettings', JSON.stringify(this.appSettings));
                } catch (error) {
                    console.log('Settings save error');
                }
            }

            applyCurrentSettings() {
                const rootElement = document.documentElement;
                
                // Theme application
                if (this.appSettings.darkTheme) {
                    rootElement.style.setProperty('--primary-color', '#2c3e50');
                    rootElement.style.setProperty('--secondary-color', '#34495e');
                    rootElement.style.setProperty('--card-bg', 'rgba(0,0,0,0.4)');
                } else {
                    rootElement.style.setProperty('--primary-color', '#667eea');
                    rootElement.style.setProperty('--secondary-color', '#764ba2');
                    rootElement.style.setProperty('--card-bg', 'rgba(255,255,255,0.15)');
                }

                // Animation settings
                if (!this.appSettings.animations) {
                    rootElement.style.setProperty('--animation-speed', '0s');
                } else {
                    rootElement.style.setProperty('--animation-speed', '0.3s');
                }

                // Auto refresh management
                if (this.appSettings.autoRefresh) {
                    this.initializeAutoRefresh();
                }
            }

            updateSettingsInterface() {
                // Update toggle switches
                Object.keys(this.appSettings).forEach(key => {
                    const toggleElement = document.getElementById(key + 'Toggle');
                    if (toggleElement && toggleElement.classList.contains('toggle-control')) {
                        if (this.appSettings[key]) {
                            toggleElement.classList.add('active');
                        } else {
                            toggleElement.classList.remove('active');
                        }
                    }
                });

                // Update dropdown selections
                Object.keys(this.appSettings).forEach(key => {
                    const selectElement = document.getElementById(key) || document.getElementById(key + 'Select');
                    if (selectElement && selectElement.tagName === 'SELECT') {
                        selectElement.value = this.appSettings[key];
                    }
                });
            }

            initializeAutoRefresh() {
                if (this.autoRefreshTimer) {
                    clearInterval(this.autoRefreshTimer);
                }

                if (this.appSettings.autoRefresh) {
                    const intervalMs = this.appSettings.updateInterval * 60 * 1000;
                    this.autoRefreshTimer = setInterval(() => {
                        if (this.activeLocation) {
                            this.refreshCurrentWeather();
                        }
                    }, intervalMs);
                }
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            new WeatherProApp();
        });
    </script>
</body>
</html>